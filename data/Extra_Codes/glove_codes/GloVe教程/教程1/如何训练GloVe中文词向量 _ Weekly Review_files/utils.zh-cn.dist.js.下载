/*! livere.tower 2019-03-21 */
"use strict";var Livere=function($){function Sticker(){}function warning(a){console.log(["WARN: ",a].join(""))}function error(a){return console.log(["ERROR: ",a].join("")),alert(a),sidebar.close()}function log(a){if(get("debug"))return console.log(a)}function set(a,b){if(!_.isObject(a)||b)return variables[a]=b,get(a);for(var c in a)variables[c]=a[c]}function incr(a){var b=get(a);return!!_.isNumber(Number(b))&&set(a,b+1)}function get(a){var b=variables[a],a=a.split(".");return _.isArray(a)&&a.length>1&&(b=search(a.length,a,variables)),b}function stripProtocol(a){return a.replace(/^(http|https):\/\//i,"")}function stripTags(a){return a.replace(/<\/?[^>]+(>|$)/g,"")}function breaklines(a){return _.isString(a)?a.replace(/<br>/gm,"\n"):a}function toHTML(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function toText(a){return String(a).replace(/(&amp;|&amp)/g,"&").replace(/(&lt;|&lt)/g,"<").replace(/(&gt;|&gt)/g,">").replace(/(&quot;|&quot)/g,'"')}function isOwner(a){return get("primary")&&get("primary.member_group_seq")===Number(a)}function getScrollY(){return window.scrollY||document.documentElement.scrollTop}function nextTick(a){return setTimeout(a,0)}function checkCode(a){return!(a.result>400&&500!==a.result)}function replaceURI(a){var b=new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/g);return a.replace(b,function(a){return"<a href="+(hasProtocol(a)?a:"http://"+a)+" title="+a+' target="_blank">'+a+"</a>"})}function getContents(a){return get((a?"slave":"master")+"_contents")}function search(a,b,c){return a<1?c:_.isObject(c)?search(a-1,b,c[b[b.length-a]]):void 0}function concatURI(a,b,c){var d="?";b.dummy=b.dummy||Math.random();for(var e in b)d+=[e,"=",b[e],"&"].join("");return[get("baseURI"),a,d,c?"":get("callback")].join("")}function setProtocol(a){return hasProtocol(a)?a:"http://"+a}function hasProtocol(a){return new RegExp("^(http|https)://","i").test(a)}function hasPublish(a){return a?shared(a):null}function login(){var a=$(this),b=a.attr("class").split("-"),c=b[b.length-1];if(!c)return void error("Login target not defined.");session.login(c,!0)}function isLogin(){return!!get("smartlogin.accessable_group_data")}function getTwitterURI(a){var b=new RegExp(/http(s)?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(es)?\/(\d+)/),c=b.exec(a);return!!(c&&c.length>0)&&c[0]}function getVideoURI(a){function b(a){return{id:a,type:"youtube",link:"https://www.youtube.com/embed/"+a}}function c(a){return{id:a,type:"vimeo",link:"https://player.vimeo.com/video/"+a}}var d=new RegExp(/(?:youtube\.com\/\S*(?:(?:\/e(?:mbed))?\/|watch\?(?:\S*?&?v\=))|youtu\.be\/)([a-zA-Z0-9_-]{6,11})/),e=new RegExp(/.*(https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+))(?:$|\/|\?*)/),f=d.exec(a),g=e.exec(a);if(!f&&!g)return!1;var h=f?f[f.length-1]:g[g.length-1];return(f?b:c)(h)}function extendParams(a){return a=a||{},$.extend(a,{consumer_seq:get("common.uid.consumer_seq"),livere_seq:get("common.uid.livere_seq"),smartlogin_seq:get("common.uid.smartlogin_seq")})}function isObjectPropertiesNull(a){for(var b in a)if(!_.isString(b)||!a[b]&&0!==a[b])return!0;return!1}function uid_to_seq(a){var b=atob(a).split("/");return{consumer_seq:b.shift(),livere_seq:b.shift(),smartlogin_seq:b.shift()}}function seq_to_uid(a,b,c){return btoa(a+"/"+b+"/"+c)}function loadCustom(a,b){loadScript(a.jsPath).then(function(){return loadCSS(a.cssPath)}).then(function(){b(null)}).fail(function(a){error(a)})}function loadScript(a){var b,c="script",d=document.getElementsByTagName(c)[0],e=Q.defer();return b=document.createElement(c),b.src=a,b.async=!0,d.parentNode.insertBefore(b,d),loadEvents(b,e),e.promise}function loadCSS(a){var b=document.createElement("link"),c=document.getElementsByTagName("head")[0],d=Q.defer();return b.type="text/css",b.rel="stylesheet",b.href=a,c.appendChild(b),loadEvents(b,d),d.promise}function loadEvents(a,b){a.onload=a.onreadystatechange=function(){a.readyState&&!/complete|loaded/.test(a.readyState)||(b.resolve(),a.onload=null,a.onreadystatechange=null)},a.onerror=function(){b.reject("Custom script or css did not loaded.")}}function toggle(a){var b=$(_.isArray(a)?a.shift():a),c=b.attr("class");return c&&c.indexOf("hide")>-1?fadeShow(b):fadeHide(b),!(_.isArray(a)&&a.length>0)||toggle(a)}function hasClass(a,b){if(a&&b)return!!($(a).attr("class")&&$(a).attr("class").indexOf(b)>-1)}function show(a){return hasClass(a,"hide")?dom.removeClass(a,"hide"):$(a).css("display","block")}function hide(a){return dom.addClass(a,"hide")}function fadeShow(a){var b=$(a);dom.fadeIn(b,200,function(){b.removeClass("hide")})}function fadeHide(a){var b=$(a);dom.fadeOut(b,200,function(){b.addClass("hide")})}function setJournalAccounts(a){var b=get("loginList");return _.contains(b,a)?a:"journal"}function korean(a){return dom.getMessage(["m_",a].join(""))||a}function share_count(){return _.reduce(get("accounts"),function(a,b){return get("shareList").indexOf(b.member_domain)>-1?a+b.member_ispost:a},0)}function isPosting(a){return _.some(get("accounts"),function(b){return Number(a)===b.member_seq&&b.member_ispost})}function getNotLoggedInList(a){var b=[],c=a||get("loginList");return _.each(get("accounts"),function(a){return b.push(a.member_domain)}),_.filter(c,function(a){return!(b.indexOf(a)>-1)})}function shared(a){return _.isString(a)&&a.length>0?a.replace("kakao","kakao_story").split(","):null}function setQuotation(a){if(a.quotation_seq){var b=get("replies.quotation.index").indexOf(Number(a.quotation_seq));$.extend(a,b>-1?{quotation:get("replies.quotation.replies")[b],quotation_content:replaceURI(a.quotation_content)}:{})}return a}function isRestrictIEVersion(a){if(a){var b=(get("browser")?get("browser"):setBrowser()).split(" ")[0],c=Number(get("browser").split(" ")[1]);return"MSIE"===b&&!(c&&c>a)}}function setBrowser(){return set("browser",function(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],"IE "+(a[1]||"")):"Chrome"===c[1]&&null!=(a=b.match(/\bOPR\/(\d+)/))?"Opera "+a[1]:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),c.join(" "))}())}function isMobile(){return void 0===get("mobile")?set("mobile",function(a){return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))}(navigator.userAgent||navigator.vendor||window.opera)):get("mobile")}function preventInherit(a){a.stopPropagation(),a.preventDefault()}function postMessage(a){if(a&&!isRestrictIEVersion(7)){return(get("receiver")||set("receiver",window.opener?window.opener:window.parent)).postMessage(JSON.stringify(a),"*")}}function dispatchEvent(a){return $(livere).trigger("custom",a)}function encodeParams(a){for(var b in a)a[b]=encodeURIComponent(a[b]);return a}function getURI(a){var b=location.host+location.pathname+location.search;return a?location.protocol+"//"+b:b}function offset(){return window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}function parseParams(a){var b={};return $.each(a,function(a,c){return b[c.split("=")[0]]=c.split("=")[1]}),b}var livere={},dom={},click,variables={callback:"livereCallback=?",baseURI:"//api-city.livere.com/",passportURI:"//passport.livere.com",loginList:["livere","twitter","instagram","facebook","google_plus","github","linkedIn","kakao","naver","tistory","weibo_sina","renren","douban","qq","baidu","mixi","open_y_jp","line","wechat"],mediaList:{khan:"경향신문",joinsjp:"조인스저팬",nocut:"노컷뉴스",hankyung:"한경닷컴",zdnet:"지디넷코리아",asiae:"아시아경제",dtnews:"디트뉴스",stoo:"스포츠투데이",coca:"코카뉴스",bloter:"블로터닷넷",mk:"매일경제",fnnews:"파이낸셜뉴스",mbn:"매일방송",busan:"부산일보",kukinews:"쿠키뉴스",newshankuk:"뉴스한국",betanews:"베타뉴스",kbsworld:"KBS",mediaus:"미디어스",yeongnamilbo:"영남일보",yonhapnews:"연합뉴스",kija:"인터넷기자협회",chdaily:"기독일보",mediapen:"미디어팬",jabo:"대자보",worldyannews:"월드얀뉴스",ytn:"YTN",rapportian:"올댓닥터스_라포르시안",asiae_er:"아시아경제이코노믹",asiae10:"아시아경제10",doodler:"두들러",venturesquare:"벤처스퀘어",wikitree:"위키트리",starn:"StarN",medicaltoday:"MedicalToday",medicaltoday2:"MedicalToday2",skydaily:"스카이데일리",ypsori:"양평시민의소리",nocuthealth:"노컷헬스",jejusori:"제주의소리",clubcity:"시티신문",newstalk:"뉴스톡",sbshopetv:"SBS희망TV",ctjournal:"대전시티저널",sbs:"SBS",doc3news:"청년의사신문",sentv:"서울경제TV",joseilbo:"조세일보",asiaherald:"아시아헤럴드",yachtpia:"요트피아",boannews:"보안뉴스",nahnews:"가톨릭신문지금여기",danbinews:"단비뉴스",newdaily:"뉴데일리",hk_biz:"한국경제매거진",jobnjoy:"한경닷컴_잡앤조이",artsnews:"아츠뉴스",modu:"모두매거진",channelit:"스카이라이프",pressbyple:"프레스바이플",dailymedy:"데일리메디",newstomato:"토마토뉴스",dreamhigh:"청소년방송단",hellodd:"대덕넷",gamemeca:"게임메카",asiae_kstar10:"아시아경제영문",neonews:"네오팝콘",goweekend:"고위크앤드",jejusori2:"제주의소리2",tofor:"투포",gynews:"광양신문",mbnmoney:"MBNMONEY",sisain:"시사인",newsnjoy:"뉴스앤조이",newscj:"천지일보",sisajournal:"시사저널",chtimes:"기독시보",cchannel:"씨채널",kstarfashion:"스타패션",cdnews:"통신일보",icross_kcr:"교차로_kcr",icross_family:"교차로_family",wolsero:"교차로_wolsero",cbcnews:"CBC뉴스",kgib:"경기일보",onkweather:"온케이웨더",thefact:"더팩트",jkn:"재경일보",national_times:"내셔널타임즈",mbs:"MBS",timenews:"타임뉴스",woorizine:"경기웹진",knnews:"경남신문",thevoice:"더보이스",enolja:"이놀자",cosmopolitan:"코스모폴리탄",ebn:"EBN",joongbooilbo:"중부일보",dailian:"데일리안",kidd:"산업일보",sportsseoul_jp:"스포츠서울_일본어_모바일",doctorw:"닥터W",kbs:"KBS",segyeilbo:"세계일보",healthandpeople:"헬스앤피플",mbc:"MBC",yangjunews:"양주뉴스",ujbnews:"의정부뉴스",bluetoday:"블루투데이",ajnews:"아주경제",livestarnews:"생방송스타뉴스",newsis:"뉴시스",kmjnews:"한국철강뉴스",yeowooji:"여우지",metroseoul:"메트로신문",itmaeil:"IT매일",everynews:"에브리뉴스",chtoday:"크리스천투데이",lara:"라라",hi_eugenes:"하이유진",sisunews:"시선뉴스",gobalnews:"고발뉴스",bluekoreadotcom:"푸른한국닷컴",workingilbo:"호주워킹일보",allaboutapp:"올어바웃앱",channela:"채널A",edaily:"이데일리",elle:"엘르-허스트중앙",mediainnews:"미디어인뉴스",pipu:"후니미디어",thehorse:"승마신문",ilovepc:"아이러브피시",ggfocus:"경기포커스",dcmcafe:"디씨엠카페",chosunbiz:"조선비즈",dnv:"디앤브이",daejonilbo:"대전일보",kbsworld_eng:"KBS_ENG",etomedia:"경제투데이",ganghwa114:"강화114",gjfocus:"경주포커스",unionpress:"unionpress",mediawhy:"미디어와이",playit:"playIT",dailylog:"데일리로그",citinature:"시민의자연",jejuopens:"제주광장",autoherald:"오토헤럴드",digitalTimes:"디지털타임즈",changupcom:"창업닷컴",headlinejeju:"헤드라인제주",asiaitnews:"AsiaITNews",kgnews:"경기신문",focusnews:"FOCUS",kbmaeil:"경북매일",geniepark:"제니파크",veritas_a:"베리타스알파",enterwa:"연예와닷컴",gndaily:"굿뉴스데일리",goodnewspress:"굿뉴스프레스",socialhealing:"소셜힐링세미나",topstarnews:"톱스타뉴스",intronews:"뉴스코리아",newtimes:"뉴타임즈",bundangnews:"분당뉴스",chungcheongtv:"충청일보",foodnews:"식품저널",ngtv:"엔지티비",upkorea:"업코리아",jnuri:"제이누리",andongnews:"안동뉴스",kyobostory:"교보스토리",newshyu:"한양뉴스",sportalkorea:"스포탈코리아",storyk:"스토리K",campustoday:"캠퍼스오늘",weeklytoday:"위클리오늘",kban:"한국엔젤투자협회",newsrise:"뉴스라이즈",gimpoin:"김포인",ittoday:"아이티투데이",gnewsdaily:"지뉴스투데이",heraldcorp:"헤럴드corp",koreaherald:"헤럴드코리아",hdcarmotorshow:"현대차모터쇼",interfootball:"인터풋볼",imaeil:"매일신문",kyeongin:"경인일보",daejeonnews:"대전뉴스",highstreetseoul:"HIGHSTREETSeoul",glebbangzip:"글빵집",hgtimes:"한강타임즈",seongdongnews:"성동저널",vop:"민중의소리",iusm:"울산매일",ikoreanspirit:"코리안스피릿",asiatoday:"아시아투데이",kgnews2:"광교신문",fntoday:"파이낸스투데이",hankookilbo:"한국일보",cowalknews:"함께걸음",domin:"전북도민일보",mediatoday:"미디어오늘",jjan:"전북일보",munhwa:"문화일보",kookje:"국제신문",dangdangnews:"당당뉴스",besuccess:"비석세스",honeyside:"허니사이드",bucheontimes:"부천타임즈",pressian:"프레시안",digitaltimes:"디지털타임즈",techinasia:"TechinAsia",inews24:"아이뉴스24",wownet:"와우넷_한국경제TV",mediajeju:"미디어제주",soulplay:"소울플레이",koreajn:"시사코리아저널",bulkyo21:"불교닷컴",sisafocus:"시사포커스",industrysolutio:"인더스트리솔루션",mtz:"mtz",seoulshinmun:"서울신문",reworks:"리웍스미디어",happytoday:"행복매일",gnews:"경기G뉴스",etnews:"전자신문",han:"한겨레",ebuzz:"이버즈",insidechina:"인사이드차이나",bizwatch:"비즈워치",hknewstoday:"한국뉴스투데이",starsian:"스타시안",newstap:"뉴스탭",nonsannews:"충청시티신문",ytnnews:"서울교육방송",babynews:"베이비뉴스",zkic:"줌인코리아인천",dhnews:"대학저널",thepr:"더피알",dailygrid:"데일리그리드",khgames:"경향게임스",segyecom:"세계일보",ohmynews:"오마이뉴스",dispatch:"디스패치",gitnews:"구미IT뉴스",washingtonpost:"워싱턴포스트",partyluv:"파티럽닷컴",bpnews:"시사인천",munhaknews:"문학뉴스",seongjuro:"성주신문",egbsnews:"경주방송",redpiano:"레드피아노",ipnnews:"IPN뉴스",gsinews:"경산신문",gybnews:"복지e데일리",visualdivenews:"비주얼다이브뉴스",cwin:"경남인뉴스",gimpo:"미래신문",hwmedia:"행복한웹앤미디어",nongaek:"논객닷컴",goodmorningcc:"굿모닝충청",tiptipnews:"팁팁뉴스",kimponews:"김포뉴스",tomorrowbooks:"내일의책",tenasia:"텐아시아",newsbaro:"뉴스바로",kukey:"고대신문",whysnews:"와이즈뉴스",newsjeju:"뉴스제주",gijangnews:"기장뉴스",kmedinews:"케이메디뉴스",iincheon:"인천신문",amnews:"농축유통신문",ipcs21:"포천신문",kferi:"한국외식경제신문",shnews:"시흥뉴스",iksannews:"익산신문",vtimes:"벤처타임즈",datanews:"데이터뉴스",munhwanews:"문화뉴스",namdoi:"남도인터넷방송",gjnewstong:"광주뉴스통",sportsq:"스포츠큐",adrnews:"갈등해결뉴스",news1:"news1",newsmeka:"뉴스메카",brcity:"보령시장신문",thefirstmedia:"미디어더퍼스트",thesejong:"세종인터넷신문",healnews:"힐뉴스",globalnews:"글로벌뉴스통신",siheungjounal:"시흥저널",pnews112:"법무경찰신문",mainnews:"유권자신문",newsculture1:"뉴스컬처",queen:"매거진플러스",areyou:"AU경제",ksngn:"경성신문",gibnews:"거제인터넷방송",cctoday:"충청투데이",medicalreport:"메디컬리포트",themetn:"테마여행신문",ecotoday:"에코투데이",wbdaily:"더웰빙",srtimes:"SR타임스",dmnews:"DM뉴스",jeonbukin:"전북인",oneulnews:"오늘신문",moreunikka:"모르니까",lnews:"레저뉴스",viva100:"브릿지경제",worldkorean:"월드코리안뉴스",ipopnews:"ipopnews",yureka:"영대신문",ntoday:"투데이신문",csbtv:"한국안전방송",dailycosmetic:"데일리코스메틱",sisainside:"시사인사이드",sport_seoul:"스포츠서울",socialdesign:"사회디자인연구소",jbpost:"전북포스트",thepingpong:"더핑퐁",soonsports:"순스포츠",theartist:"디아티스트",economictoday:"이코노믹투데이",mediait:"미디어잇",eco2day:"에코투데이",dailygaewon:"개원",dailystage:"데일리스테이지",etoday:"이투데이",columning:"칼라밍",reportnews:"리포트뉴스",bbs:"BBS뉴스",thegoodinpeople:"더굿인피플",latimes:"한국조경신문",nutrition:"뉴트리션",cmni:"엠뉴스",cctvnews:"cctv뉴스",epnc:"EP&C뉴스",embeddedworld:"임베디드뉴스",staraz:"스타에이지",weddingtv:"웨딩TV",tvj:"연예투데이뉴스",goodfaith:"바른믿음",hynews:"주간함양",dailygame:"데일리게임",sportschosun:"스포츠조선_allthatstar",dongbujungang:"동부중앙신문",coverage:"커버리지",jejuweekly:"제주위클리",tournews21:"투어코리아",sportsin:"스포츠인",catholicpress:"카톨릭프레스",gmaker:"지메이커",Chefnews:"셰프뉴스",j2k:"j2k",godpia:"갓피아",topnews:"톱뉴스",kupa:"한국대학홍보협의회",wooripension:"우리펜션",sports_chosun:"스포츠조선",medicalnews:"의학신문",incheonilbo:"인천일보",focus:"포커스뉴스",chi:"산업방송채널i",unaeil:"유내일미디어",suwan_news:"수완컴퍼니",test_insight_DJ:"DJ",channel_i:"한국산업기술미디어문화재단",fpn119:"소방방재신문",planetsports:"한입미디어",justmedia:"저스트미디어",boan24:"보안24",hapdongnews:"뉴스웍스",viewers:"뷰어스",geojetimes:"거제타임즈",ilpn:"LPN로컬파워통신",paichainews:"배재뉴스",obsnews:"OBS경인TV",whitepaper:"화이트페이퍼",news1star:"뉴스1스타",newsdot:"뉴스닷",ceoreporter:"CEO타임즈",petpolmagazine:"펫폴매거진",beffreport:"베프리포트",kinews:"키뉴스",sednews:"서울경제신문",newspim:"뉴스핌",newspen:"더뉴스펜",sisaweek:"시사위크",news1_star:"뉴스1스타",kidok:"기독신문",lawtimes:"법률신문",mobiinside:"모비인사이드",jebo:"제보타임스",cowayblog:"코웨이블로그",newsway:"뉴스웨이",meconomynews:"시장경제신문",kado:"강원도민일보",ilyoseoul:"일요서울(ND소프트)",new_asiae:"아시아경제",breaknews:"브레이크뉴스",dpost:"디포스트",goodtms:"굿타임즈",olivenote:"올리브노트"}};livere.__version__="9.1",livere.refresh=function(a,b){var c=dom.refresh[a];if(!c&&!_.isObject(a))return void error("Undefined function.");c.call(this,b)},livere.init=function(a){return waterfall.init()},dom.refresh=function(){var a={};return a.sidebar=function(){var a={};return a.reload=function(){if(get("sidebar"))return sidebar.init({target:["common","setting"]},!1),dom},a.top=function(){var a=get("primary"),b=$(".sidebar-menu .active").attr("data-value"),c=get("modifyProfile"),d=$.extend({accounts:get("accounts"),snsCount:get("accounts").length,writeCount:get("sidebar.group.write_count"),isOwner:a&&!get("targetMember"),modifyProfile:c},a,dom.getMessage());return dom.remove(".sidebar-top",!0).render("sidebar.top",".sidebar-top",d),_.each($(".sidebar-menu button"),function(a,c){$(a).attr("data-value")===b&&$(a).addClass("active")}),c?$(".sidebar-top").addClass("sidebar-livere"):$(".sidebar-top").removeClass("sidebar-livere"),set("hideTitle",!1),$(".sidebar-wrapper").trigger("scroll"),dom},a.config=function(a){function b(a){var b=a.find(".icon-up, .icon-down"),c=b.attr("class"),d=c.indexOf("icon-up")>-1?"icon-up":"icon-down";return dom.removeClass(b,"icon-up").removeClass(b,"icon-down"),"icon-up"===d?dom.addClass(b,"icon-down"):dom.addClass(b,"icon-up")}function c(a){var b=a.parent().siblings("dd"),c=b.find(".icon-up, .icon-down");_.each(c,function(a){dom.removeClass(a,"icon-up").addClass(a,"icon-down")})}var d=$(a.currentTarget),e=d.siblings("ul");return b(d),e.find("li").length>0?(dom.remove(".sidebar-setting-content",!0),dom):(c(d),dom.remove(".sidebar-setting-content",!0).render("sidebar.setting_content",e,$.extend({member_seq:d.attr("data-seq"),member_domain:d.attr("data-domain")},dom.getMessage())),dom)},a}(),a.shared=function(a){return a=a||$("#layer-shared").parent(),dom.build("layerHandler",{self:a,target:"shared"}),control.bind("layer.shared"),dom},a.modify=function(a){var b=$(a.target),c=b.find(".reply-top").eq(0),d=b.find(".reply-content p").eq(0),e=$.extend(a.reply,dom.getMessage());return d.html(replaceURI(e.content)),dom.remove(c,!0).render("list.reply_top",c,e),dom},a.login=function(b,c){var d=isLogin();c=c||{},session.valid(function(e,f){if(!e){if(session.save(f),"refresh"===b)return;b||d?a.sidebar.reload.call(this):(dom.remove(".popup-wrapper",!1),get("primary")&&get("primary").member_group_seq===get("targetMember")&&(set("targetMember",null),dom.refresh.sidebar.top()));var g=b||"attach";return g=b||d?g:"login",dispatchEvent({type:g,message:c.message||dom.getMessage("m_notify_"+g)}),waterfall.event.state.call(this)}warning("User has not logged in.")})},a}(),dom.update=function(){var a={};return a.action=function(a,b){function c(a,b,c,g){var h=d(b);if(f(a),e(b,h+c.operand),c.is_modified){var i=a.siblings(),j=i.find(g);h=d(j),f(i),e(j,h-1)}}function d(a){return Number(a.html())}function e(a,b){return a.html(b)}function f(a){if(a.attr("class").indexOf("active")>-1)return void a.removeClass("active");a.addClass("active")}var g=".good-count, .bad-count",h=a.find(g);a.parent();return c(a,h,b,g)},a.blockList=function(a){function b(a){var b=get("block_list_idx"),c=Number($(".popup-block").attr("data-seq"));b.indexOf(c)>-1||(a.parent().find("#sidebar-reply-list").removeClass("hide"),a.remove())}function c(a){get("block_list_idx").indexOf(a)<0||dom.build("sidebarHandler",$.extend({targets:["unblock"],t_member_group_seq:a},dom.getMessage()))}var d=$(".sidebar-content"),e=d.find(".list-block");e.length>0?b(e):c(a)},a}(),dom.build=function(a,b){var c={},d={};c.common=function(){dom.render("external_style","head",get("smartlogin").sync_acc).render("wrapper","#container",dom.getMessage())},c.loginHandler=function(a){return isLogin()?d.login.call(this,a):d.not_logged_in.call(this,a)},c.construction=function(){dom.render("check.construction","#container",dom.getMessage())},c.error=function(){dom.render("check.error","#container",dom.getMessage())},c.layerHandler=function(a){var b=a.self,c=a.target,e=d.layer[c];return b&&c&&d.layer[c]?e.call(this,b):void error("Target not found.")},c.popupHandler=function(a){function b(){dom.remove(".popup-wrapper",!1).render("popup.wrapper",".sidebar-wrapper")}function c(){var a=$(".popup"),b=($(".sidebar-wrapper").width()-a.width())/2;return a.css("margin-left",b)}var e=a.target,f=d.popup[e];return e&&f?(b.call(this),f.call(this,a),c.call(this)):void error("Target not found.")},c.notifyHandler=function(a){var b=a.target,c=d.notify[b];if(!b||!c)return void error("Target not found.");c.call(this,a)},c.modify=function(a){function b(a){var b;_.each(a,function(a){b=$([a,".hide"].join("")),b.removeClass("hide")})}function c(a,b){var c;_.each(a,function(a){c=$(b).find(a).get(0),$(c).addClass("hide")})}var d=$(a.currentTarget).parents(".reply-wrapper").eq(0),e=d.find(".modify-wrapper").eq(0),f=d.find(".reply-content p"),g=[".reply-history",".reply-content-wrapper"],h=stripTags(breaklines(f.html())),i={content:h,height:f.height()+32,sns:get("primary.member_domain"),is_modify:!0};$.extend(i,dom.getMessage()),dom.remove(".modify-wrapper",!0).render("common.write_form.m_wrapper",e).render("common.write_form.wf_top",".modify-wf",i).render("common.write_form.wf_bottom",".modify-wf",i),set("originContent",{content:h,reply_seq:d.attr("data-seq")}),b(g),c(g,d)},c.reduce=function(){function a(a){_.each(a,function(a,b){var c=$(a),d=c.find(".reply-bottom:first");d.height()<500||c.find(".list-reduce-wrapper").length>0||dom.addClass(d,"list-content-hide").render("list.reduce_btn",c,dom.getMessage())})}var b=$("#sidebar-reply-list > .reply-wrapper");return nextTick(function(){return a(b)})},c.reply=function(a){var b,c=$(a.target),d=a.reply,e=a.pos||!1;get("livere.stickerContainer")&&d.sticker&&(b=sticker.find(d.sticker));var f=_.filter(d,function(a,b){return 0===b.indexOf("image")&&a&&_.isString(a)}),g=getVideoURI(d.link1);if(!d||c.length<1)return void error("Reply or target not found.");dom.render("list.wrapper",c,$.extend(d,dom.getMessage(),{pos:e,shared:shared(d.sept_sns),content:d.content,images:{list:f,klass:f.length>1?"attach-multi-"+f.length:null},link:!g&&f.length<1?d.link1:null,video:f.length<1?g:null,sticker:b}))},c.sidebarHandler=function(a){if(!a||!a.targets)return void error("Targets not found");_.each(a.targets,function(b){d.sidebar[b](a)})},c.scrapHandler=function(a){var b=a.target,c=d.scrap[b];return b&&c?a.link||a.data?c.call(this,a):void error("Parameter error"):void error("Target not found.")},d.scrap=function(){var a={};return a.image=function(a){var b=$(".attach-scrap-wrapper");dom.render("write_form.image_preview",b,a)},a.video=function(a){var b,c=$(".attach-scrap-wrapper"),d=$.extend({link:a.data.link},dom.getMessage());dom.render("write_form.video_preview",c,d),b=c.find(".lv_player"),set("video",a.data),nextTick(function(){b.css("height",b.width()/1.777),dom.remove(".attach-scrap-loading")})},a.link=function(a){var b=$.extend(a,dom.getMessage());dom.render("list.link_wrapper",b.$wrapper,b).render("list.link",b.$wrapper,b),b.$wrapper.attr("data-loaded",!0)},a}(),d.sidebar=function(){function a(a,b){b||dom.remove(".sidebar-content > div",!0);var c=$(".sidebar-not-support");dom.remove(c),a.indexOf("notification")>-1&&dom.render("sidebar.notSupport",".sidebar-bottom",$.extend({pos:!0},dom.getMessage())),dom.removeClass(".sidebar-menu button","active").addClass(a,"active")}var b={};return b.common=function(a){dom.remove(".sidebar-wrapper",!0).render("sidebar.wrapper",".sidebar-wrapper",a).render("sidebar.top",".sidebar-top",a).render("sidebar.middle",".sidebar-middle",a).render("sidebar.bottom",".sidebar-bottom",a);var b=get("targetMember");!a.isOwner&&b&&member.isBlock(b)&&dom.build("sidebarHandler",$.extend(a,{targets:["unblock"],t_member_group_seq:b})),sidebar.animateWithResize(a.init)},b.setting=function(b){$.extend(b,{accounts:get("accounts")},get("sidebar.group"),get("primary"),dom.getMessage()),a(".sidebar-setting-btn"),dom.remove("#sidebar-setting-wrapper",!0).render("sidebar.setting","#sidebar-setting-wrapper",b)},b.repliesAll=function(b){var c=get("sidebar.reply_list");return a(".sidebar-myreply-btn",b.viewpage>1),c.length<1?(dom.render("list.first_writer","#sidebar-reply-list",_.extend({isPublic:b.isPublic},dom.getMessage())),reply.additionalWorks.call(this)):(_.each(c,function(a){a=setQuotation(a),$.extend(a,{shared:shared(a.sept_sns)}),dom.build("reply",{reply:a,target:"#sidebar-reply-list"})}),dom.build("reduce").remove(".sidebar-wrapper .more-wrapper"),b.isMore&&dom.render("list.more_btn","#sidebar-reply-list",b),reply.additionalWorks.call(this))},b.replies=function(b){var c=get("sidebarReplyListCurrentLivere");return a(".sidebar-myreply-current-livere-btn",b.viewpage>1),c.length<1?(dom.render("list.first_writer","#sidebar-reply-list",_.extend({isPublic:b.isPublic},dom.getMessage())),reply.additionalWorks.call(this)):(_.each(c,function(a){a=setQuotation(a),$.extend(a,{shared:shared(a.sept_sns)}),dom.build("reply",{reply:a,target:"#sidebar-reply-list"})}),dom.build("reduce").remove(".sidebar-wrapper .more-wrapper"),b.isMore&&dom.render("list.more_btn","#sidebar-reply-list",b),reply.additionalWorks.call(this))},b.unblock=function(a){return dom.remove(".sidebar-content > div",!0).render("list.unblock_user.wrapper",".sidebar-content",a).render("list.unblock_user.block_cancel",".block-middle",a),$(".sidebar-content").find("#sidebar-reply-list").addClass("hide"),control.bind("block.unblock")},b.notification=function(b){function c(a,b){dom.render("sidebar.notification_more_btn",a,b)}var d="#sidebar-notification-list",e=(get("domains"),$.extend({count:get("sidebar.count"),rows:get("sidebar.rows"),offset:get("sidebar.offset")||0,isNotification:!0,primary:get("primary")},dom.getMessage()));return b.isNotificationMore&&$.extend(e,b),a(".sidebar-notification-btn",b.isNotificationMore),!e.count||e.count<1?void dom.render("list.first_writer",d,e):(dom.remove(d+" .more-wrapper").render("sidebar.notification",d,e),!(e.offset<e.count)||c(d,e))},b}(),d.notify=function(){var a={};return a.error=function(b){return a.alert(b)},a.alert=function(a){var b="#wrapper > .alert-wrapper",c=a.common?"alert":a.type;return dom.remove(b).render("common.notify."+c,"#wrapper",a),setTimeout(function(){dom.fadeOut(b,1e3,function(){return dom.remove(b)})},2e3)},a}(),d.popup=function(){var a={};return a.remove=function(a){dom.render("popup.remove",".popup",dom.getMessage())},a.modified=function(a){var b=$.extend(a.reply,dom.getMessage());dom.render("popup.modified_list",".popup",b)},a.report=function(a){dom.render("popup.report",".popup",dom.getMessage())},a.logout=function(a){dom.render("popup.logout",".popup",dom.getMessage())},a.unblock=function(){var a=$.extend({t_member_group_seq:$(".list-block").attr("data-seq")},dom.getMessage());dom.render("popup.block_user.wrapper",".popup",a).render("list.unblock_user.block_confirm",".popup-block .block-middle",a)},a.block=function(a){var b=$(a.event.currentTarget),c=b.parents(".reply-wrapper:first"),d=c.find(".writer-name-text").text(),e=c.find(".writer").attr("data-seq"),f=$.extend({},{member_name:d,t_member_group_seq:e},dom.getMessage());dom.render("popup.block_user.wrapper",".popup",f).render("popup.block_user.block",".popup-block .block-middle",f)},a.login=function(a){dom.render("popup.login",".popup",$.extend(a,dom.getMessage()))},a}(),d.layer=function(){var a={};return a.share=function(a){var b=a.parent(),c=b.find("ul");return c.length>0?void dom.fadeOut(c,200,function(){dom.remove(c,!1)}):(dom.clearLayers("#wrapper").render("layer.lv_layer_share",b,dom.getMessage()),dom.fadeIn(b.find("ul"),200))},a.reply=function(a){var b=a.parents(".reply-wrapper").eq(0),c=".reply-history-layer",d=a.parent().find(c),e=b.find(".writer").eq(0).attr("data-own"),f=b.find(".reply-history").eq(0).attr("data-modified"),g={is_owner:Number(e),is_modified:Number(f)};return d.length>0?void dom.fadeOut(d,200,function(){dom.remove(d,!1)}):(dom.clearLayers("#wrapper").render("layer.lv_reply_history",a.parent(),$.extend(g,{modify:g.is_owner&&!g.is_modified},dom.getMessage())),dom.fadeIn(c,200))},a}();var e=c[a];return e?(e.call(this,b),this):void error("Undefined function")},dom.addClass=function(a,b){if(a&&b)return $(a).addClass(b),this},dom.removeClass=function(a,b){if(a&&b)return $(a).removeClass(b),this},dom.animate=function(a,b,c,d){return(_.isObject(a)?a:$(a)).animate(b,c,d),this},dom.fadeIn=function(a,b,c){var d=$(a),e=0;return c=c||show,_.each(d,function(a,d){e=(d+1)*b,get("mobile")?c.call(this,$(a)):$(a).fadeIn(e,c)}),this},dom.fadeOut=function(a,b,c){var d=$(a),e=0;return c=c||hide,_.each(d,function(a,d){e=(d+1)*b,get("mobile")?c.call(this,$(a)):$(a).fadeOut(e,c)}),this},dom.slideDown=function(a,b,c){var d=_.isObject(a)?a:$(a);return c=c||show,get("mobile")?c.call(this,d):d.slideDown(b,c),this},dom.slideUp=function(a,b,c){var d=_.isObject(a)?a:$(a);return c=c||hide,get("mobile")?c.call(this,d):d.slideUp(b,c),this},dom.get=function(a,b){var c=dom.templates[a],a=a.split(".");return _.isArray(a)&&a.length>1&&(c=search(a.length,a,dom.templates)),c||void error("Template has not found")},dom.init=function(){var a=Q.defer();return dom.build("common"),a.resolve(),a.promise},dom.clearLayers=function(a,b){function c(a,b,c){var d=[a,' [data-type="revival"]'].join(""),e=[a,' [data-type="toggle"]'].join("");return dom.remove(d).fadeOut(e,"fast",function(){dom.addClass(e,"hide")}),!b||b.attr("data-type",c)}var d,e=$(b).length>-1?$(b):null;return e&&(d=e.attr("data-type"),e.removeAttr("data-type")),c(a,e,d),this},dom.remove=function(a,b){var c=_.isObject(a)?a:$(a);return b?c.empty():c.remove(),this},dom.render=function(a,b,c){var d=dom.get(a),e=Handlebars.compile(d),f=_.isObject(b)?b:$(b);if(!d||!e)return error(["Can't create",a,"template"].join("")),!1;var g=$(e(c).replace(/>\s+</g,"><").trim());return c&&c.after?g.insertAfter(f):c&&c.pos?g.prependTo(f):g.appendTo(f),this},dom.getMessage=function(a){return a?dom.message[a]:dom.message};var Api=function(){};Api.prototype.requestPassport=function(a,b,c){a&&$.ajax({url:"https://passport.livere.com/v1/"+a,method:"GET",dataType:"jsonp",data:b}).done(function(a){return c(null,a)}).fail(function(){return c("Request error")})},Api.prototype.request=function(a,b,c){function d(a){$.getJSON(a).done(function(a){if(!checkCode(a))try{c(a.message||"Error something")}catch(a){return void set("sync",!1)}c(null,a)}).fail(function(){c("Request error")}).always(function(){set("sync",!1)})}var e=extendParams(b||{});if(!e)return void error("Parameter error");if(e=encodeParams(e),b.sync){if(get("sync"))return;set("sync",!0)}d(concatURI(a,e),0)},Api.prototype.troy=function(){var a={};return a.valid=function(a){return $.getJSON("https://livere.me/valid").done(function(b){return a(null,b)}).fail(function(){return a("Request error")})},a}(),Api.prototype.config=function(a,b){b(null,"test")},Api.prototype.open=function(a){var b="https://passport.livere.com/v1/auth/"+a.strategy,c=b+"?force="+a.force+"&redirectUrl="+a.redirectUrl;window.open(c,"_blank",a.attributes)};var api=new Api,CardReplyPopup=function(){};CardReplyPopup.prototype.open=function(a){set("cardReply",a),$("#sidebar").hide(),cardReplyPopup.renderCardReply(a)},CardReplyPopup.prototype.clickImageWrapper=function(a){var b=$(a.target).closest(".card-popup"),c=b.find(".card-popup-image"),d=c.attr("src");window.open(d)},CardReplyPopup.prototype.clickLike=function(a){var b=get("cardReply")
;$(".button-like").prop("disabled",!0),postMessage({e:"requestAction",caller:"sidebar",params:{consumerSeq:b.consumerSeq,livereSeq:b.livereSeq,repSeq:b.repSeq,replySeq:b.reply.replySeq,memberGroupSeq:get("primary.member_group_seq"),targetMemberGroupSeq:b.reply.targetMemberGroupSeq,type:"like"}})},CardReplyPopup.prototype.actionSuccess=function(a){var b=get("cardReply");if(b&&a.replySeq===b.reply.replySeq){var c=$(".like-count"),d=+c.html(),e=a.data.isCanceled?-1:1;c.html(d+e),$(".button-like").prop("disabled",!1)}},CardReplyPopup.prototype.clickDelete=function(a){dom.render("popup.remove",".card-popup-wrapper",dom.getMessage()),dom.remove(".card-popup")},CardReplyPopup.prototype.confirmDelete=function(a){var b=get("cardReply");postMessage({e:"requestDeleteReply",caller:"sidebar",params:{consumerSeq:b.consumerSeq,livereSeq:b.livereSeq,repSeq:b.repSeq,replySeq:b.reply.replySeq,memberGroupSeq:b.memberGroupSeq}}),cardReplyPopup.close()},CardReplyPopup.prototype.deleteSuccess=function(a){cardReplyPopup.close()},CardReplyPopup.prototype.clickWriterName=function(a){var b=get("cardReply");cardReplyPopup.removeCardReply(),set("cardReply",null),sidebar.open({target:["common","replies"],member_group_seq:b.reply.targetMemberGroupSeq,uid:seq_to_uid(get("common.consumer_seq"),get("common.livere_seq"),get("common.smartlogin_seq")),isTab:isMobile()})},CardReplyPopup.prototype.close=function(a){cardReplyPopup.removeCardReply(),$("#sidebar").show(),set("cardReply",null),postMessage({e:"closeCardReplyPopup",caller:"sidebar"})},CardReplyPopup.prototype.clickMoreButton=function(a){cardReplyPopup.expand()},CardReplyPopup.prototype.expand=function(a){var b=$(".card-popup"),c=$(".card-popup-content-wrapper"),d=$(".card-popup-more-button"),e=$(".card-popup-image-wrapper").outerHeight();b.hasClass("expand")?(b.removeClass("expand"),c.scrollTop(0),c.css("height",""),d.html(dom.getMessage("m_card_popup_expand"))):(b.addClass("expand"),c.css("height",e+55+"px"),d.html(dom.getMessage("m_card_popup_shrink")))},CardReplyPopup.prototype.renderCardReply=function(a){dom.render("cardPopup.wrapper","#wrapper",_.extend(a,dom.getMessage())),$(".card-popup-image").unbind("load").bind("load",function(a){var b=a.target;b.offsetHeight>b.offsetWidth?(b.style.maxWidth="100%",b.style.maxHeight=""):(b.style.maxWidth="",b.style.maxHeight="100%"),b.style.display="inline"}),$(".card-popup-content").outerHeight()>40&&$(".card-popup").addClass("clamp");var b=$(".card-popup-content-wrapper").outerWidth();$(".card-popup-content-wrapper").css("max-height",b+55+"px")},CardReplyPopup.prototype.removeCardReply=function(){dom.remove(".card-popup-wrapper")};var cardReplyPopup=new CardReplyPopup,Config=function(){};Config.prototype.init=function(){function a(a){set({livere:a.LIVERE,loginList:["livere","twitter","instagram","facebook","github","google_plus","linkedIn","kakao","naver","tistory","weibo_sina","renren","douban","qq","baidu","mixi","open_y_jp","line","wechat"],shareList:["twitter","facebook","linkedIn","kakao","naver","weibo_sina","renren","mixi"],rep:$.extend(a.REP,{p_total_count:a.P_REPLY_COUNT})}),set({page_limit:Math.ceil(get("rep.p_total_count")/get("livere.rowsnum")),page:1}),set("emojis",a.emojis),list.save({parents:a.RE_LIST,children:a.RE_RE_LIST,quotation:{replies:a.quotation_list,index:_.map(a.quotation_list,function(a){return a.reply_seq})}})}var b=Q.defer(),c=$("#container").data();return set("common",{uid:uid_to_seq(c.uid),refer:c.refer||getURI(),title:c.title||document.title,description:c.description,logo:c.logo,site:c.site}),config.get(function(c,d){if(c)return void b.reject(c);d.construction&&(set("construction",!0),b.reject("construction")),a(d),config.libraries(["handlebars","browser"]),b.resolve()}),b.promise},Config.prototype.library=function(){var lib={};return lib.handlebars=function(){Handlebars.registerHelper("date_summary",function(a){var b=moment(_.isString(a)?new Date(a):a.time),c=moment(),d=c.diff(b,"seconds")>45?b.fromNow():dom.getMessage("few_seconds");return c.diff(b,"days")>0?b.format("ll"):d}),Handlebars.registerHelper("is_primary",function(a,b){return get("primary.member_seq")===Number(a)?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("toText",function(a){return a?toText(a):a}),Handlebars.registerHelper("setProtocol",function(a){return setProtocol(a)}),Handlebars.registerHelper("stripProtocol",function(a){return stripProtocol(a)}),Handlebars.registerHelper("stripTagAndReduce",function(a,b){return a?stripTags(a.substring(0,b)):null}),Handlebars.registerHelper("is_posting",function(a,b){return isPosting(a)?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("date_tooltip",function(a){return a?moment(a.time).format("lll"):a}),Handlebars.registerHelper("is_owner",function(a){return get("primary.member_group_seq")===a?1:0}),Handlebars.registerHelper("isOwner",function(a,b){return get("primary.member_group_seq")===a?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("containSNS",function(a,b){return get("loginList").indexOf(a)>-1?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("list_of_not_logged_in",function(){return getNotLoggedInList()}),Handlebars.registerHelper("is_login",function(a){return get("primary")?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("korean",function(a){return korean(a)}),Handlebars.registerHelper("is_mobile",function(a){return isMobile()?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("setMiddleMargin",function(){return $(".sidebar-menu").length,"103px"}),Handlebars.registerHelper("is_mine",function(a){return $(".sidebar-menu").length>0?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("hasPublish",function(a,b){return get("shareList").indexOf(a)>-1?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("breaklines",function(a){return a?new Handlebars.SafeString(a):""}),Handlebars.registerHelper("is_active",function(a,b){return _.some(get("history"),function(c){return c.t_reply_seq===a&&c.do_code===b})?"active":""}),Handlebars.registerHelper("is_kakao",function(a,b){return"kakao"===a?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("ifCompare",function(v1,operator,v2,options){return eval("v1"+operator+"v2")?options.fn(this):options.inverse(this)}),Handlebars.registerHelper("restrict_ie_version",function(a,b){return isRestrictIEVersion(a)?b.inverse(this):b.fn(this)}),Handlebars.registerHelper("isBlockedUser",function(a,b){var c=get("block_list_idx");return c&&c.indexOf(Number(a))>-1?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("getMediaName",function(a){var b=get("mediaList")[a];return b?"("+b+")":""}),Handlebars.registerHelper("setJournalAccounts",function(a){return setJournalAccounts(a)}),Handlebars.registerHelper("getBlockMessage",function(a,b){var c=get("block_list"),d="";return _.each(c,function(b,c){if(a===b.t_member_group_seq)switch(b.reason){case 1:case 2:case 3:return d=dom.getMessage("m_block_"+b.reason);case 9:return d=b.reason_etc}}),""!=d&&!0===b&&(d=dom.getMessage("m_block_prefix")+d+dom.getMessage("m_block_suffix")),d}),Handlebars.registerHelper("isBlind",function(a,b,c,d){var e=!1;return Number(a)>=3&&Number(c)>=5&&Number(c)>=2*Number(b)&&(e=!0),e?d.fn(this):d.inverse(this)}),Handlebars.registerHelper("isLivereAccount",function(a,b){return"livere"===a?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("emoji",function(a){return sticker.emoji(a)}),Handlebars.registerHelper("toHtml",function(a){return a?toHTML(a):""}),Handlebars.registerHelper("linkify",function(a){return a?replaceURI(a):""})},lib.browser=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){return $.inArray(a,this)}),click="ontouchstart"in window&&get("mobile")?"tap":"click"},lib}(),Config.prototype.libraries=function(a){if(a&&_.isArray(a)){var b=config.library;_.each(a,function(a){return b[a]()})}},Config.prototype.get=function(a){var b={refer:get("common.refer"),title:get("common.title"),version:"lv9"};api.request("livereDataLoad",b,function(b,c){b&&a("Request error"),a(null,c)})};var config=new Config,Control=function(){};Control.prototype.init=function(){return control.bind(["popup.common","popup.cardReply","layer.reply","modifyProfile","custom","modify","common","list"])},Control.prototype.bind=function(a,b){var c,d,e,f;return a&&_.isArray(a)?void _.each(a,function(a){control.bind(a)}):(c=a.indexOf(".")>-1?a.split("."):a,_.isArray(c)&&c.length>1&&(d=c.shift(),e=c.shift()),f=parent&&e?control[d][e]:control[a],f||error("Controller had no contain target object."),f.call(this,b))},Control.prototype.common=function(){function a(){return $(this)[0].src="https://cdn-city.livere.com/images/user_profile_3"}function b(a){return session.login("livere")}function c(a){a.stopPropagation()}function d(a){function b(){return hide(".sidebar-mini-title-wrapper"),show(".sidebar-title-wrapper"),dom.removeClass(".sidebar-top","fixed"),$(".sidebar-middle").css("margin-top","0"),set("hideTitle",!1)}function c(){var a=$(".sidebar-menu").length>0;return hide(".sidebar-title-wrapper"),show(".sidebar-mini-title-wrapper"),dom.addClass(".sidebar-top","fixed"),$(".sidebar-middle").css("margin-top",a?f+"px":"100px"),set("hideTitle",!0)}var d=get("titleHeight")||set("titleHeight",$(".sidebar-title-wrapper").height()),e=$(this).scrollTop()-d,f=$(".sidebar-top").height();if(!(e>0&&get("hideTitle")||e<0&&!get("hideTitle")))return e>0?c():b()}function e(a){var b=window.getSelection;if(!a.keyCode||27==a.keyCode)return b&&b().toString().length,dom.clearLayers("#wrapper")}var f=$(".sidebar-wrapper");f.on(click,"> div",e).on("keyup","> div",e).on(click,"button",c).on(click,".popup > div",c),$("#sidebar").on(click,sidebar.close),f.on(click,c).on(click,".close-btn",sidebar.close).on(click,".sidebar-menu button",sidebar.tab).on(click,".list-more-btn",sidebar.more).on(click,".notification-more-btn",notification.more).on(click,".sidebar-setting-account",dom.refresh.sidebar.config).on(click,".setting-primary-btn",sidebar.primary).on(click,".setting-logout-btn",waterfall.popup.logout).on(click,".sns-login-list button",login).on(click,".sidebar-login button",function(a){return session.login($(this).attr("data-name"))}),f.on(click,".notification-wrapper",notification.read),f.on(click,".login-lead-button",b),f.on(click,".sidebar-setting .setting-radio-btn",sidebar.posting).on(click,".sidebar-push button",sidebar.push).on(click,".icon-member-leave",member.leave),f.on("mouseenter",".icon-member-leave",function(){return show(".member-leave")}).on("mouseleave",".icon-member-leave",function(){return hide(".member-leave")}),f.on("mouseenter",".icon-member-leave",function(){return show(".member-leave")}).on("mouseleave",".icon-member-leave",function(){return hide(".member-leave")}),f.on("mouseover",".password-reset-btn",function(){return $(this).find("img").attr("src","https://cdn-city.livere.com/images/mysecret-on.png"),$(this).css("background-color","#D60036"),show(".member-password-layer")}).on("mouseout",".password-reset-btn",function(){return $(this).find("img").attr("src","https://cdn-city.livere.com/images/mysecret-off.png"),$(this).css("background-color","#F6F6F6"),hide(".member-password-layer")}).on(click,".password-reset-btn",function(){var a="width=500px, height=710px";return a+=",top=100px,left="+document.body.clientWidth/4+"px",window.open("https://was.livere.me/member/password","",a)}),get("mobile")||f.on("scroll",d),f.on(click,".sidebar-modify-btn",waterfall.modifyProfile.modifyDraw),$(".sidebar-profile img").on("error",a),$(".sidebar-setting-img img").on("error",a),$(".notification-writer-img img").on("error",a)},Control.prototype.modify=function(){function a(){dom.remove(".modify-wf",!0).removeClass(".reply-content-wrapper.hide","hide").removeClass(".reply-history.hide","hide")}var b=".modify-wf";$(".sidebar-wrapper").on(click,b+" .wf-write-btn",reply.modify).on(click,b+" .comment-cancel-btn",a)},Control.prototype.layer=function(){function a(){return $(this).remove(),dom.clearLayers()}var b={};return b.reply=function(){var b=".reply-history-layer";$(".sidebar-wrapper").on(click,b+" .reply-delete-btn",waterfall.popup.remove).on(click,b+" .reply-modify-btn",waterfall.popup.modify).on(click,b+" .reply-report-btn",waterfall.popup.report).on(click,b+" .modified-list-btn",reply.modified).on(click,b+" .reply-block-btn",waterfall.popup.block).on(click,".reply-show-btn",member.showReply).on(click,b+" button",a)},b}(),Control.prototype.popup=function(){function a(a){a.stopPropagation()}function b(){return dom.remove(".popup-wrapper")}var c={};return c.common=function(){function c(){return dom.remove(".attach-image-viewer"),set("preview",null),!!get("sidebar")||waterfall.event.close()}function d(){var a=$(this),b=a.siblings("img").attr("src"),c=get("preview"),d=c.indexOf(b),e=a.attr("class").indexOf("prev")>-1,f=e?d-1:d+1;return f=f>c.length-1?0:f,f=f<0?c.length-1:f,list.image({images:c,current:c[f]})}$("#wrapper").on(click,".attach-viewer-close",c).on(click,".attach-image-viewer",c).on(click,".attach-viewer-prev",d).on(click,".attach-viewer-next",d).on(click,".attach-viewer-content",a),$(".sidebar-wrapper").on(click,'.popup button[data-type="close"]',b).on(click,".popup-wrapper",b).on(click,".popup > ul",a)},c.cardReply=function(){$("#wrapper").on(click,".card-popup-close-button",cardReplyPopup.close).on(click,".button-like",cardReplyPopup.clickLike).on(click,".button-delete",cardReplyPopup.clickDelete).on(click,".card-popup-wrapper .confirm-yes-btn",cardReplyPopup.confirmDelete).on(click,".card-popup-image-wrapper",cardReplyPopup.clickImageWrapper).on(click,".card-popup .writer-name",cardReplyPopup.clickWriterName).on(click,".card-popup-more-button",cardReplyPopup.clickMoreButton).on(click,".card-popup-wrapper",cardReplyPopup.close).on(click,".card-popup",a)},c.report=function(a){$(".sidebar-wrapper").on(click,".popup-police .police-yes-btn",function(b){reply.report(a)})},c.logout=function(a){$(".popup-wrapper").on(click,".popup-confirm .confirm-yes-btn",function(c){return sidebar.logout(a),b()})},c.remove=function(a){$(".popup-wrapper").on(click,".popup-confirm .confirm-yes-btn",function(c){reply.remove(a),b()})},c}(),Control.prototype.message=function(){function a(a){var b={open:function(a){session.init().fail(waterfall.fail).done(function(){return sidebar.open(a,!0)})},image:function(a){return list.image(a.images)},openCardReplyPopup:function(a){return cardReplyPopup.open(a)},actionSuccess:function(a){return cardReplyPopup.actionSuccess(a)},deleteSuccess:function(a){return cardReplyPopup.deleteSuccess(a)},loginData:function(){return api.troy.valid(function(a,b){return waterfall.event.loginData({result:b})})},sessionData:function(){return waterfall.event.sessionData(get("accounts"))}},c=a.originalEvent.data;if(c&&c.match(/^{.*}$/g)){var d=JSON.parse(c),e=b[d.e];if(e)return e(d.params)}}$(window).on("message",a)},Control.prototype.custom=function(){function a(a,b){var c={alert:function(a){dom.build("notifyHandler",$.extend({target:"alert",common:!0,pos:!0},a))},error:function(a){dom.build("notifyHandler",$.extend({target:"error",pos:!0},a))},login:function(a){return c.alert(a)},modify:function(a){return waterfall.event.state.call(this),c.alert(a)},logout:function(a){return c.alert(a)},remove:function(a){return waterfall.event.state.call(this),c.alert(a)},report:function(a){return c.alert(a)},attach:function(a){return c.alert(a)},detach:function(a){return c.alert(a)},primary:function(a){dom.build("notifyHandler",$.extend({target:"alert",pos:!0},a,get("primary")))}},d=c[b.type];if(d)return d(b)}$(livere).on("custom",a)},Control.prototype.list=function(){return $(".sidebar-wrapper").on(click,".reply-menu-btn",waterfall.layer.reply).on(click,".comment-good, .comment-bad",reply.action).on(click,".share-sns-btn",waterfall.layer.share).on(click,".list-reduce button",reply.more).on(click,".content-toggle-btn",reply.toggle),$(".sidebar-wrapper").on(click,".sort-btn",waterfall.layer.sort).on(click,".alert-btn",waterfall.notify.alert).on(click,".attach-image-btn, .attach-multi-btn",list.image),$(".sidebar-wrapper").on("error","img",function(){console.log("asd")}),this},Control.prototype.modifyProfile=function(){return $(".sidebar-wrapper").on("change",'input[type="file"]',member.uploadImage.attach).on(click,".sidebar-modify-save",member.updateMemberInfo).on(click,".sidebar-modify-cancel",member.updateMemberInfo),this},Control.prototype.block=function(){var a={};return a.unblock=function(){$(".list-block").unbind().on(click,".confirm-btn",waterfall.popup.unblock),$(".popup-block").unbind().on(click,".block-yes-btn",member.unblock)},a.block=function(){$(".popup-block").unbind().on(click,".block-execute input:radio",member.disabledBlock).on(click,"button.block-yes-btn",member.block)},a}();var control=new Control,List=function(){};List.prototype.offset=function(){if(get("notifies")&&!(get("notifies").length<1)){if($(".reply-count").offset().top<$(window).scrollTop())return void $("#list > .alert-wrapper").addClass("fixed");$("#list > .alert-wrapper").removeClass("fixed")}},List.prototype.image=function(a){function b(a){set("preview",a.images),dom.remove(".attach-image-viewer").render("popup.image","#wrapper",$.extend({image:a.current,control:a.images.length>1},dom.getMessage()))}if(!a||!a.images){var c=$(this),d=c.parents(".reply-wrapper").eq(0),e=d.find(".attached-image"),f=c.find(".attached-image").attr("data-src");return b({images:_.map(e,function(a){return $(a).attr("data-src")}),current:f})}return!!_.isObject(a)&&b(a)},List.prototype.save=function(a){if(_.isObject(a))return set("replies",{parents:a.parents,children:a.children,quotation:a.quotation})};var list=new List,Member=function(){};Member.prototype.leave=function(){return window.open("https://livere.com/leave/step1","_self")},Member.prototype.isBlock=function(a){var b=get("block_list_idx");return null!==b&&b.indexOf(a)>-1},Member.prototype.unblock=function(){function a(a){function b(a){var b=a.resultData.t_member_group_seq,c=get("block_list_idx"),d=get("block_list"),e=null;return c.splice(c.indexOf(b),1),_.each(d,function(a,c){if(a.t_member_group_seq===Number(b))return void(e=c)}),d.splice(e,1),waterfall.event.updateBlock({vo:a.resultData,callType:"unblock"}),dom.update.blockList()}api.request("API_Livere",a,function(a,c){if(!a)return b(c),member.closePopup()})}var b=$(".popup-block"),c=b.attr("data-seq");a({consumer_seq:get("common.uid.consumer_seq"),livere_seq:get("common.uid.livere_seq"),smartlogin_seq:get("common.uid.smartlogin_seq"),member_group_seq:get("primary.member_group_seq"),t_member_group_seq:c,command:"setBlockUser",callType:"cancel"})},Member.prototype.closePopup=function(){dom.remove(".attach-image-viewer").remove(".popup-wrapper")},Member.prototype.disabledBlock=function(a){var b=$(a.currentTarget),c=Number(b.val()),d=b.parents(".popup-block").find(".block-wf");return 9===c?d.attr("disabled",!1):d.attr("disabled",!0)},Member.prototype.block=function(){function a(a){var b={consumer_seq:get("common.uid.consumer_seq"),livere_seq:get("common.uid.livere_seq"),smartlogin_seq:get("common.uid.smartlogin_seq"),member_group_seq:get("primary.member_group_seq"),t_member_group_seq:Number(a.attr("data-seq")),command:"setBlockUser",callType:"block",reason:Number(a.find('input:radio[name="block-radio"]:checked').val())};if(9===b.reason){var c=a.find(".block-wf").val();b.reason_etc=c}return b}function b(a){api.request("API_Livere",a,function(a,b){if(!a)return c(b),member.closePopup()})}function c(a){var b=a.resultData.t_member_group_seq,c=get("block_list_idx"),d=get("block_list");return null===c&&(c=set("block_list_idx",[])),null===d&&(d=set("block_list",[])),c.push(b),d.push(a.resultData),waterfall.event.updateBlock({vo:a.resultData,callType:"block"}),dom.update.blockList(b)}var d=$(".popup-block"),e=a(d);return 9===e.reason&&""===e.reason_etc?(d.find(".block-wf").addClass("block-guide-line"),void d.find(".block-guide").append(dom.getMessage("m_block_guide"))):b(e)},Member.prototype.showReply=function(a){function b(a){var b=a.parents(".reply-wrapper:first"),c=b.find(".reply-content:first");_.each(c.find("span"),function(a,b){$(a).remove()}),c.find(".hide:first").removeClass("hide"),a.remove(),b.removeClass("reply-blind-wrapper")}return b($(a.currentTarget))},Member.prototype.updateMemberInfo=function(){function a(){return{command:"modifyMember",member_name:f.member_name!==g?g:"",member_icon:f.member_icon!==h?h:"",member_group_seq:f.member_group_seq,member_seq:f.member_seq}}function b(a){api.request("API_Livere",a,function(a,b){if(!a)return d(b),e(),c(b.resultData)})}function c(a){a&&$.ajax("https://was.livere.me/member",{type:"POST",dataType:"json",data:{type:"profile",nickname:a.member_name,profile:a.member_icon}})}function d(a){var b=a.resultData;$.extend(f,{member_name:b.member_name,member_icon:b.member_icon}),set("primary",f)}function e(){set("modifyProfile",!1),dom.refresh.sidebar.top(),waterfall.event.state()}var f=get("primary"),g=$("#sidebar-modify-name").val(),h=$(".lv-profile-upload img").attr("src"),i=$(this).data();if("livere"===f.member_domain)return f.member_name===g&&f.member_icon===h||"cancel"===i.type?e():g.length<2||g.length>12?void dispatchEvent({type:"error",message:dom.getMessage("m_notify_nameLength")}):b(a())},Member.prototype.uploadImage=function(){var a={};return a.attach=function(b){function c(b){if(b&&!(_.isArray(b)&&b.length<1))return a.upload(b)}function d(){var b=$(this),c=b.parents("form");c.ajaxForm({url:"https://was.livere.me/v1/image/upload/",dataType:"json",success:a.done,error:a.error,timeout:1e4}),c.submit()}var e=b.target.files;return(isRestrictIEVersion(9)?d:c).call(this,e)},a.done=function(a){set("isAttaching",!1),$(".lv-profile-upload img").attr("src",a[0].image)},a.upload=function(b){function c(b){$.ajax(b).done(a.done).fail(a.error)}if(b&&!get("isAttaching")){var d=new FormData;return _.each(b,function(a){d.append("lv_file",a)}),c({url:"https://was.livere.me/v1/image/upload/",type:"POST",data:d,processData:!1,contentType:!1})}},a}();var member=new Member,Notification=function(){};Notification.prototype.read=function(){function a(a){var c="https://was.livere.me/v1/notifications/read/";return c+="?nid="+a,window.open(c),b()}function b(){return dom.removeClass(c,"notification-wrapper-new")}var c=$(this),d=c.attr("data-nid");return!!d&&a(d)},Notification.prototype.more=function(){var a=$(this),b=a.attr("data-offset");b&&sidebar.getNotifications(b,function(a,b){!a&&b&&dom.build("sidebarHandler",$.extend(b,{targets:["notification"],isNotificationMore:!0},dom.getMessage()))})};var notification=new Notification,Reply=function(){};Reply.prototype.link=function(){var a={};return a.set=function(b){var c=getVideoURI(b);if(c)return reply.video.load(c);a.get(b,function(a,c){if(!a)return"image"===c.type?reply.image.scrap(b):(dom.build("scrapHandler",$.extend(c,{link:b,target:"link"})),!(b&&!get("link"))||set("link",b))})},a.get=function(a,b){a&&$.ajax({url:"https://api.livere.com/page/",type:"GET",data:{url:a},dataType:"jsonp"}).success(function(a){return a?b(null,a):b("Not found")})},a}(),Reply.prototype.remove=function(a){function b(){return{reply_seq:d,command:"deleteReply",do_name:"delete",rep_seq:e,target_member_group_seq:get("primary.member_group_seq")}}function c(){return dom.remove(a),dispatchEvent({type:"remove",message:dom.getMessage("m_notify_remove")})}var d=a.attr("data-seq"),e=a.attr("data-rep"),f=b();if(isObjectPropertiesNull(f))return void error("Parameter error");api.request("API_Livere",f,function(a,b){return a?void error(a):c()})},Reply.prototype.more=function(){var a=$(this).parents(".list-reduce-wrapper"),b=a.siblings(".reply-bottom");dom.removeClass(b,"list-content-hide").remove(a,!0)},Reply.prototype.modified=function(a){function b(b,d){c(g)&&api.request("API_Livere",b,function(b,c){if(b)return void error(b);dom.build("popupHandler",{target:"modified",reply:c.resultData,event:a})})}function c(a){return!!_.isNumber(a)}function d(a){return $.extend({},get("common"),{command:"getModifyHistory",rep_seq:get("rep.rep_seq"),reply_seq:a})}var e=$(a.currentTarget),f=e.parents(".reply-wrapper").eq(0),g=Number(f.attr("data-seq"));b(d(g),f)},Reply.prototype.modify=function(){function a(a){if(!c(toHTML(f),g.content))return init();api.request("API_Livere",a,function(a,c){return a?void error(a):(Livere.refresh("modify",{reply:c.resultData,target:e.parents(".reply-wrapper").get(0)}),b())})}function b(){return dom.remove(".modify-wf",!0).removeClass(".reply-content-wrapper.hide","hide").removeClass(".reply-history.hide","hide"),dispatchEvent({type:"modify",message:dom.getMessage("m_notify_modify")})}function c(a,b){return!a||a.length<1?dispatchEvent({type:"error",message:dom.getMessage("m_notify_contentLength")}):a!==b}function d(a,b){return $.extend({},get("common"),{command:"modifyReply",content:stripTags(a).trim(),rep_seq:get("rep.rep_seq"),name:get("primary.member_name"),reply_seq:b,sync:!0})}var e=$(".modify-wf"),f=breaklines(e.find("#comment-wf-content").val()),g=get("originContent");a(d(f,g.reply_seq))},Reply.prototype.additionalWorks=function(a){var b=$('.third-party-wrapper[data-loaded="false"]'),c=$('.link-wrapper[data-loaded="false"]');_.each(b,function(a){return reply.setThirdParties($(a))}),_.each(c,function(a){return reply.setLinks($(a))})},Reply.prototype.setThirdParties=function(a){function b(a){var b,d=a.parent();return dom.render("list.video",a,{link:a.attr("data-uri")}),b=d.find(".lv_player"),nextTick(function(){b.css("height",b.width()/1.777)}),c(a)}function c(a){return a.attr("data-loaded",!0)}return b(a)},Reply.prototype.setLinks=function(a){var b=a.attr("data-uri");reply.link.get(b,function(c,d){c||d.type||dom.build("scrapHandler",$.extend(d,{link:b,target:"link",$wrapper:a}))})},Reply.prototype.action=function(a){function b(a,b){api.request("API_Livere",a,function(b,d){if(b)return void error(b);c(a,d.resultData)})}function c(a,b){var c=b.is_canceled?-1:1;$.extend(b,{operand:c,modify:b.is_modified,cancel:b.is_canceled}),dom.update.action(e,b)}function d(){return $.extend({},get("common"),{command:"action",rep_seq:get("rep.rep_seq"),sync:!0})}var e=$(a.currentTarget),f=e.parents(".reply-wrapper").eq(0),g=e.attr("class").indexOf("good")>-1?"good":"bad",h=f.attr("data-seq"),i=f.find(".writer").attr("data-seq"),j=d();if(!isLogin())return waterfall.popup.login();b($.extend(j,{reply_seq:h,target_member_group_seq:i,do_name:g,do_code:"good"===g?201:202}),e)},Reply.prototype.report=function(a){function b(){return $.extend({},get("common"),{command:"action",do_name:"police",do_code:203,member_group_seq:get("primary.member_group_seq"),rep_seq:get("rep.rep_seq"),sync:!0})}function c(a){api.request("API_Livere",a,function(a,b){return a?void error(a):d()})}function d(){return dom.remove(".popup",!1),dispatchEvent({type:"report",message:dom.getMessage("m_notify_report")})}var e=a.find(".writer").eq(0).attr("data-seq"),f=a.attr("data-seq"),g=$("input:radio[name=police-radio]:checked").val(),h=b();return isLogin()?g?c($.extend(h,{target_member_group_seq:e,report_flag:g,reply_seq:f})):void error("You must check to type of report"):dispatchEvent({type:"error",message:dom.getMessage("m_notify_needLogin")})},Reply.prototype.toggle=function(){var a=$(this),b=a.parents(".reply-wrapper").eq(0),c=b.find(".reply-bottom"),d=c.attr("class");if(d&&d.indexOf("hide")>-1){var e=b.find(".content-toggle-btn");return c.removeClass("hide"),void _.each(e,function(a){$(a).addClass("content-close-btn").removeClass("content-open-btn")})}c.addClass("hide"),a.addClass("content-open-btn").removeClass("content-close-btn")};var reply=new Reply,Session=function(){};Session.prototype.login=function(a,b){function c(a,b){var c=a.indexOf("open_y_jp")>-1?"yj":a.split("_")[0].toLowerCase(),e="facebook"===a?"width=1030px, height=710px":"width=500px, height=710px";return e+=",top=100px,left="+document.body.clientWidth/4+"px",{strategy:c,force:b||!1,redirectUrl:d(),attributes:e}}function d(){var a="https://was.livere.me/redirect";return get("mobile")&&(a+="?originUrl="+location.href),a}if(get("loginList").indexOf(a)<0)return void error("SNS Login error");api.open(c(a,b))},Session.prototype.config=function(a,b){function c(a,b){api.request("API_Livere",a,function(a,c){if(a)return void b(a);b(null)})}function d(){return{command:"setMemberData",member_group_seq:get("primary.member_group_seq"),sync:!0}}if($.extend(a,d()),isObjectPropertiesNull(a))return void error("Parameter error");c(a,b)},Session.prototype.remove=function(a,b){if(!a.memberSeq)return void error("Parameter error");api.requestPassport("release",{memberSeq:a.memberSeq},function(c,d){if(c||!d)return b(c);if(!_.contains(get("loginList",a.strategy))){var e=get("smartlogin.sync_acc"),f=get("smartlogin.logouturl");if(a.strategy===e&&f){var g=get("common.site"),h=f.replace("[[REDIRECT_URL]]",encodeURIComponent(g));return window.parent.location.href=h}}api.request("API_Login",{code:d.secretCode},function(a,c){return b(a?a:null)})})},Session.prototype.init=function(a){var b=Q.defer();return session.valid(function(a,c){a?b.reject(a):(session.save(c),b.resolve())}),b.promise},Session.prototype.logout=function(){function a(){return dom.refresh.login("logout")}if(isLogin()){get("primary");api.request("API_Livere",{command:"livereLogout"},function(b,c){session.init().then(a)})}},Session.prototype.save=function(a){if(a&&a.result){var b=a.resultData,c=b.accessable_group_data,d=a.historyData,e=get("loginList").concat(b.linkage_accs);return set({primary:c?c.primaryMemberData:null,smartlogin:b,history:d,block_list:b.block_list,block_list_idx:b.block_list?_.map(b.block_list,function(a){return a.t_member_group_seq}):null,accounts:c?_.filter(c.member_datas,function(a){return 1===a.member_islogin&&e.indexOf(a.member_domain)>-1}):null}),set("domains",get("accounts")?_.map(get("accounts"),function(a){return a.member_domain}):null),this}},Session.prototype.valid=function(a){api.request("smartlogin",{rep_seq:get("rep.rep_seq"),refer:get("common.refer")},function(b,c){b&&a("Request error"),a(null,c)})},Session.prototype.primary=function(a,b){if(!a)return void b("Parameter error");api.requestPassport("config/"+a+"/primary",{},function(a,c){if(a||!c)return b(a);api.request("API_Login",{code:c.secretCode},function(a,c){return b(a?a:null)})})},Session.prototype.posting=function(a,b){if(!a)return void error("Parameter error");api.requestPassport("config/"+a+"/post",{},function(a,c){if(a||!c)return b(a);api.request("API_Login",{code:c.secretCode},function(a,c){return b(a?a:null)})})};var session=new Session,Sidebar=function(){};Sidebar.prototype.init=function(a,b){if(a=a||{},!isRestrictIEVersion(7)){var c=_.isArray(a.target)?a.target:["common","replies"],d=1;set("modifyProfile",!1),set("targetMember",a.member_group_seq?Number(a.member_group_seq):null),set("sidebarCurrentTab",c[c.length-1]),(get("targetMember")||get("primary"))&&sidebar.get({viewpage:d,path:a.path},function(a,e){if(a||!e.group)return error(a),sidebar.close();sidebar.save(e,d);var f=get("targetPrimary")||get("primary"),g=get("targetAccounts")||get("accounts");return dom.build("sidebarHandler",$.extend({},{accounts:g,snsCount:g.length,writeCount:e.total_count,isOwner:f&&!get("targetMember")||isOwner(get("targetMember")),isMore:d<get("replies"===get("sidebarCurrentTab")?"sidebarPageLimitCurrentLivere":"sidebarPageLimit"),notLoggedInList:getNotLoggedInList(get("smartlogin.linkage_accs")),init:b,modifyProfile:get("modifyProfile"),targets:c,isPublic:e.group.notify_bookmark>0||!get("sidebarReplyListClose")},f,dom.getMessage())),!get("mobile")||sidebar.resizeHeight.call(this)})}},Sidebar.prototype.resizeHeight=function(){return $("body").height($("#sidebar").height())},Sidebar.prototype.logout=function(a){function b(){var a="width=500px, height=700px, top=100px, left="+document.body.clientWidth/4+"px";return session.logout(),get("mobile")?location.href=c(f,g,!0):(sidebar.close(),window.open(c(f,g),"_blank",a))}function c(a,b,c){var d="?memberSeq="+a+"&memberGroupSeq="+b
;return"https://passport.livere.com/release"+(d+=c?"&redirectUrl=https://livere.com":"")}var d=$(a.currentTarget),e=d.parents("dd"),f=e.find(".sidebar-setting-account").attr("data-seq"),g=get("primary.member_group_seq"),h=e.find(".sidebar-setting-account").attr("data-domain");if(get("accounts").length<2)return b();session.remove({memberSeq:f,strategy:h},function(a){return a?void error(a):(dom.remove(e,!1),dom.refresh.login("detach",{message:korean(h)+" "+dom.getMessage("m_notify_detach")}))})},Sidebar.prototype.open=function(a){function b(a,b){return _.chain(a).filter(function(a){return a.indexOf(b)>-1}).map(function(a){return a.split("=")[1]}).toString()}if(a&&a.isTab){var c=location.search.split("&");a.member_group_seq=b(c,"member_group_seq"),a.path=b(c,"path")}return sidebar.init(a,!0)},Sidebar.prototype.close=function(){function a(){dom.animate(".sidebar-wrapper",{right:"-400"},"fast",function(){dom.remove(".sidebar-wrapper",!0).fadeOut("#sidebar","fast",waterfall.event.close)})}return set({sidebar:null,targetPrimary:null,targetAccounts:null,block_list:null,block_list_idx:null}),get("mobile")?window.close():a()},Sidebar.prototype.getContentHeight=function(a){return a-$(".sidebar-top").height()-$(".sidebar-bottom").height()-$(".sidebar-menu").height()},Sidebar.prototype.animateWithResize=function(a){if(a&&!isMobile())return dom.fadeIn("#sidebar",300,function(){dom.animate(".sidebar-wrapper",{right:"0"},"fast")});$(".sidebar-wrapper").css("right",0)},Sidebar.prototype.save=function(a,b){var c=a.group;isOwner(c.member_group_seq)||set({targetPrimary:c.primaryMemberData,targetAccounts:c?c.member_datas:[]}),set({sidebar:a,sidebarCurrentPage:b,sidebarPageLimit:Math.ceil(a.total_count/10)}),list.save({quotation:{replies:a.quotation_list,index:_.map(a.quotation_list,function(a){return a.reply_seq})}})},Sidebar.prototype.draw=function(a){var b=a.viewpage||1;sidebar.get({viewpage:b},function(c,d){if(c)return void error(c);sidebar.save(d,b);var e=a.target;dom.build("sidebarHandler",$.extend({targets:[e],viewpage:b,notLoggedInList:getNotLoggedInList(get("smartlogin.linkage_accs")),isMore:b<get("replies"===get("sidebarCurrentTab")?"sidebarPageLimitCurrentLivere":"sidebarPageLimit"),isPublic:d.group.notify_bookmark>0||!get("sidebarReplyListClose")},dom.getMessage())),console.log(a.member_group_seq)})},Sidebar.prototype.tab=function(){var a=$(this),b=a.attr("data-value");return b?(set("sidebarCurrentTab",b),sidebar.draw({target:b})):void error("Target not found")},Sidebar.prototype.primary=function(){var a=$(this),b=a.parents("ul").siblings("button"),c=b.attr("data-domain");session.primary(c,function(a){return a?void error(a):dom.refresh.login("primary")})},Sidebar.prototype.push=function(){function a(a){var b=a.attr("class"),c=b.indexOf("btn-on")>-1?"btn-on":"btn-off";if(dom.removeClass(a,c),"btn-on"===c)return void dom.addClass(a,"btn-off");dom.addClass(a,"btn-on")}var b=$(this),c={};a(b),_.each($(".sidebar-push button"),function(a){c[$(a).attr("data-value")]=$(a).attr("class").indexOf("btn-on")>-1?1:0}),session.config(c,function(a){if(a)return void error(a)})},Sidebar.prototype.posting=function(){function a(a){var b=a.attr("class"),c=b.indexOf("btn-on")>-1?"btn-on":"btn-off";if(dom.removeClass(a,c),"btn-on"===c)return void dom.addClass(a,"btn-off");dom.addClass(a,"btn-on")}var b=$(this),c=b.parents("ul").siblings("button"),d=c.attr("data-domain");session.posting(d,function(c){if(c)return void error(c);session.valid(function(c,d){if(!c)return session.save(d),a(b),waterfall.event.state.call(this)})})},Sidebar.prototype.more=function(){return sidebar.draw({target:get("sidebarCurrentTab"),viewpage:get("sidebarCurrentPage")+1})},Sidebar.prototype.get=function(a,b){function c(){return{command:"getMemberData"}}function d(a){$.ajax({url:"https://api-zero.livere.com/v1/user/comments",method:"get",dataType:"jsonp",data:{memberGroupSeq:a.member_group_seq,type:"page",page:a.viewpage,currentLivereFlag:!0,consumerSeq:get("common.uid.consumer_seq"),livereSeq:get("common.uid.livere_seq")}}).then(function(c){function d(a){var b={};return Object.keys(a).forEach(function(c){var d=c.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()});b[d]=a[c]}),b}set("sidebarReplyListClose",c.result.isClose),c.result.isClose?set("sidebarReplyListCurrentLivere",[]):(set("sidebarReplyListCurrentLivere",c.result.comments.map(function(a){return d(a)})),c.result.count&&set("sidebarPageLimitCurrentLivere",Math.ceil(c.result.count/10))),api.request("API_Livere",a,function(c,d){if(c)return e(b);var f=d.resultData;return f?"true"===a.isOwner?void sidebar.getNotifications(0,function(a,c){return a?e(b):b(null,$.extend(c,f))}):b(null,f):e(b)})}).fail(function(a){console.log(a)})}function e(a){return a("User not found")}var f=get("targetMember"),g=get("primary.member_group_seq"),h=_.isNumber(f)?f:g;if(h)return $.extend(a,{member_group_seq:h,viewpage:a.viewpage||1,isOwner:!(!g||!isOwner(h)),path:a.path},c()),d(a,b)},Sidebar.prototype.getNotifications=function(a,b){var c=get("primary.member_group_seq");$.ajax("https://was.livere.me/v1/notifications/list/",{data:{memberGroupSeq:c,offset:a||0},type:"GET",dataType:"json"}).done(function(a){return b(null,a)}).fail(function(){return b("Error")})};var sidebar=new Sidebar;Sticker.prototype.find=function(a){var b,c=!0;return _.each(get("livere.stickerContainer").stickerGroupList,function(d,e){c&&_.each(d.stickerList,function(d){if(a===d.sticker_seq)return c=!1,void(b=d)})}),b},Sticker.prototype.emoji=function(a){function b(a){var b=dom.get("list.emoji");return Handlebars.compile(b)(a)}$.each(get("emojis"),function(c,d){var e=b(d),f=":"+d.name+":";a=a.split(f).join(e)});var c=$("<p />").html(a),d=c.children(".emoji"),e=c[0].innerText;return 1!==d.length||e?a:(dom.addClass(d,"one"),$(d)[0].outerHTML)};var sticker=new Sticker;dom.templates={wrapper:'\n<div id="wrapper">\n  <div id="sidebar"{{#is_mobile}}{{else}} style="display: none"{{/is_mobile}}>\n    <div class="sidebar-wrapper">\n    </div>\n  </div>\n</div>\n    ',check:{construction:'<div class="check-wrapper" data-type="construction"><div class="construction-wrapper"><div class="check-top"><span class="text-indent check-img">{{m_construction}}</span><span class="check-title">{{m_construction}}</span></div><div class="check-center"><span class="font-dark-gray">{{m_construction_desc_f}}<br>{{m_construction_desc_s}}<br>{{m_construction_desc_t}}</span></div></div></div>'},layer:{lv_reply_history:'<ul class="reply-history-layer" data-type="revival">{{#isBlockedUser member_group_seq}}{{else}}{{#unless is_owner}}<li><button type="button" class="reply-block-btn" data-seq="{{member_group_seq}}"><span>{{m_block_user}}</span></button></li>{{/unless}}{{/isBlockedUser}}{{#if modify}} <li><button type="button" class="reply-modify-btn"><span>{{m_reply_modify}}</span></button></li> {{/if}} {{#if is_modified}} <li><button type="button" class="modified-list-btn"><span>{{m_modify_list}}</span></button></li> {{/if}} {{#unless is_owner}} <li><button type="button" class="reply-report-btn"><span>{{m_reply_report}}</span></button></li> {{/unless}} {{#if is_owner}} <li><button type="button" class="reply-delete-btn"><span>{{m_reply_delete}}</span></button></li> {{/if}} </ul>'},popup:{wrapper:'<div class="popup-wrapper"><div class="popup"></div></div>',remove:'<ul class="popup-confirm"><li class="confirm-top"><span class="confirm-close-title">{{m_reply_delete}}</span><button type="button" data-type="close"><span class="confirm-close-btn">{{m_close}}</span></button></li><li class="confirm-middle"><span>{{m_is_delete}}</span></li><li class="confirm-bottom"><button type="button" class="confirm-no-btn confirm-btn" data-type="close"><span>{{m_no}}</span></button><button type="button" class="confirm-btn confirm-yes-btn" data-type="close"><span>{{m_yes}}</span></button></li></ul>',logout:'<ul class="popup-confirm"><li class="confirm-top"><span class="confirm-close-title">{{m_remove_account}}</span><button type="button" data-type="close"><span class="confirm-close-btn">{{m_close}}</span></button></li><li class="confirm-middle"><span>{{m_is_remove_account}}</span></li><li class="confirm-bottom"><button type="button" class="confirm-no-btn confirm-btn" data-type="close"><span>{{m_no}}</span></button><button type="button" class="confirm-btn confirm-yes-btn"><span>{{m_yes}}</span></button></li></ul>',modified_list:'<ul class="popup-modify"><li class="modify-top"><span class="modify-close-title">{{m_modified_list}}</span><button type="button" data-type="close"><span class="modify-close-btn">{{m_close}}</span></button></li><li class="modify-middle"><div class="modify-account"><ul class="modify-writer"><li class="modify-writer-img"><img src="{{member_icon}}" alt="{{member_domain}} {{m_profile_img}}" onerror="Livere.imgError.call(this)"/></li><li class="modify-writer-type"><span class="text-indent bg-{{setJournalAccounts member_domain}}"> {{m_reply_primary}} </span></li><li class="modify-writer-name"><span class="list-name-text">{{name}}</span></li></ul></div><div class="modify-after"><div class="modify-history"><div class="reply-history-time"><span class="modify-time" alt="{{date_tooltip regdate}}">{{date_summary regdate}}</span> · {{m_reply_be_modified}} </div></div><div class="after-content"><p>{{breaklines (emoji (linkify (toHtml origin_content)))}}</p></div></div><div class="modify-before"><div class="modify-history"><div class="reply-history-time"><span class="modify-time" alt="{{date_tooltip modify_regdate}}">{{date_summary modify_regdate}}</span> · {{m_reply_modified}}</div></div><div class="before-content"><p>{{breaklines (emoji (linkify (toHtml content)))}}</p></div></div></li><li class="modify-bottom"></li></ul>',report:'<ul class="popup-police"> <li class="police-top"><span class="police-close-title">{{m_reply_report_title}}</span> <button type="button" data-type="close"> <span class="police-close-btn">{{m_close}}</span> </button></li> <li class="police-middle"><ul> <li><label><input type="radio" name="police-radio" value="1" checked><span class="police-radio">{{m_spam}}</span></label></li> <li><label><input type="radio" name="police-radio" value="2"><span class="police-radio">{{m_plaster}}</span></label></li> <li><label><input type="radio" name="police-radio" value="3"><span class="police-radio">{{m_slander}}</span></label></li> <li><label><input type="radio" name="police-radio" value="4"><span class="police-radio">{{m_etc}}</span></label></li> </ul></li> <li class="police-bottom"><button type="button"class="police-yes-btn police-btn"> <span>{{m_reply_report}}</span> </button> <button type="button" class="police-no-btn police-btn"data-type="close"> <span>{{m_cancel}}</span> </button></li> </ul>',image:'<div class="attach-image-viewer"> <div class="attach-viewer-content"> <img src={{image}} alt="{{m_attach_image}}" onerror="Livere.imgError.call(this)"/> <button type="button" class="attach-viewer-close"> <span class="text-indent">{{m_close}}</span> </button>{{#if control}}<button type="button" class="attach-viewer-prev"> <span class="text-indent">{{m_prev}}</span> </button> <button type="button" class="attach-viewer-next"> <span class="text-indent">{{m_next}}</span> </button>{{/if}}<a class="attach-origin-link" href={{image}} title={{m_original}} aria-label={{m_original}} target="_blank"> <span class="text-indent">{{m_original}}</span> </a> </div> </div>',block_user:{wrapper:'<ul class="popup-block" data-seq="{{t_member_group_seq}}" data-type=""> <li class="popup-top"> <span class="popup-close-title">{{m_block_title}}</span> <button type="button" data-type="close"> <span class="popup-close-btn">{{m_close}}</span> </button> </li> <li class="block-middle"> </li> <li class="confirm-bottom"> <button type="button" class="confirm-btn block-yes-btn"> <span>{{#isBlockedUser t_member_group_seq}}{{m_unblock}}{{else}}{{m_block}}{{/isBlockedUser}}</span> </button> <button type="button" class="confirm-btn" data-type="close"> <span>{{m_block_no}}</span> </button> </li> </ul>',block:'<span class="block-middle-title"><span class="font-dark-gray">{{member_name}} </span>{{m_block_confirm}}</span> <ul class="block-execute"> <li> <label> <input type="radio" name="block-radio" value="1" checked><span class="block-radio">{{m_block_1}}</span> </label> </li> <li> <label> <input type="radio" name="block-radio" value="2"><span class="block-radio">{{m_block_2}}</span> </label> </li> <li> <label> <input type="radio" name="block-radio" value="3"><span class="block-radio">{{m_block_3}}</span> </label> </li> <li> <label> <input type="radio" name="block-radio" value="9"><span class="block-radio">{{m_block_custom}}</span> </label> <textarea class="block-wf" disabled="disabled" title="{{m_block_title}} {{m_block_custom}}" aria-label="{{m_block_custom}}" placeholder="{{m_block_placeholder}}"></textarea> <span class="block-guide font-suny-red"></span></li> </ul>'},login:'<div class="snslogin-layer-wrapper"> <div class="sns-login-layer"> <div class="sns-login"> <span class="login-layer-title">{{m_notify_needLogin}}</span> <ul class="sns-login-list main"> {{#each linkageAccs}} {{#ifCompare this "===" ""}} <li class="sns-login-button sns-login-blank"></li> {{else}} <li class="sns-login-button"> <button type="button" class="sns-login-{{this}}"> <span class="text-indent bg-{{setJournalAccounts this}}-medium sns-icon">{{this}}</span> <span class="sns-label">{{korean this}}</span> </button> </li> {{/ifCompare}} {{/each}} </ul> </div> <div class="confirm-bottom"> <button type="button" class="confirm-no-btn confirm-btn" data-type="close"> <span>{{m_cancel}}</span> </button> </div> </div> </div>'},list:{first_writer:'\n<div class="emptylist-wrapper" {{#is_mobile}}{{#if isNotification}}{{else}}style="margin-top:{{setMiddleMargin}}"{{/if}}{{/is_mobile}}>\n  <div class="check-top">\n    <span class="text-indent check-img">\n      {{#if isNotification}}\n      {{m_notification_empty}}\n      {{else}}\n\n      {{#if isPublic}}\n      {{m_reply_empty}}\n      {{else}}\n      {{m_myreply_private_account}}\n      {{/if}}\n\n      {{/if}}\n    </span>\n  </div>\n  <div class="check-center">\n    <span>\n      {{#if isNotification}}\n      {{m_notification_empty}}\n      {{else}}\n\n      {{#if isPublic}}\n      {{m_reply_empty}}\n      {{else}}\n      {{m_myreply_private_account}}\n      {{/if}}\n\n      {{/if}}\n    </span>\n  </div>\n</div>',link_wrapper:'<div class="link-wrapper" data-uri="{{uri}}"></div>',link:'<div class="link-emptybar"></div><a href="{{link}}" class="link-href" target="_blank"> <div class="link-description">{{#if thumbnail}}<div class="link-description-img"> <img src="{{thumbnail}}" alt="{{m_thumbnail}}" onerror="Livere.imgError.call(this)"></div>{{/if}}<div class="link-description-content"> <span class="link-title font-dark-gray">{{title}}</span> <span class="link-content">{{stripTagAndReduce description 150}}</span> <span class="link-url ">{{stripProtocol link}}</span> </div> </div> </a>',wrapper:'\n<div class="reply-wrapper {{#isBlind police good bad}}{{#isOwner member_group_seq}}{{else}} reply-blind-wrapper{{/isOwner}}{{/isBlind}}" data-seq={{reply_seq}} data-rep={{rep_seq}} style="{{css}}">\n  <div class="reply-top">\n    <div class="reply-title">\n      <a href="{{setProtocol site}}" title="{{title}}" target="_blank">\n        <span class="font-warm-gray">{{title}}</span>\n      </a>\n    </div>\n    <div class="writer" data-own="{{is_owner member_group_seq}}" data-seq="{{member_group_seq}}">\n      <ul class="writer-account">\n        <li class="writer-img"><img src="{{member_icon}}" alt="{{m_profile_img}}" onerror="Livere.imgError.call(this)"/></li>\n        <li class="writer-type"><span class="text-indent bg-{{setJournalAccounts member_domain}}">{{m_reply_primary}} </span></li>\n        <li class="writer-name">\n          <a {{#if member_url}}href="{{member_url}}"{{/if}} title="{{name}}" aria-label="{{name}}" target="_blank">\n            <span class="writer-name-text">{{name}}</span>\n            <span class="text-indent {{#if member_url}}icon-outlink{{/if}}">{{m_user_page}}</span>\n          </a>\n        </li>\n        <li class="reply-option">\n          <div class="reply-option-btn">\n            <button type="button" class="content-toggle-btn content-close-btn">\n              <span class="text-indent">{{m_reply_close}}</span>\n            </button>\n            <button type="button" class="reply-menu-btn">\n              <span class="text-indent">{{m_reply_layer_open}}</span>\n            </button>\n          </div>\n        </li>\n      </ul>\n    </div>\n    <div class="reply-history" data-modified="{{is_modified}}">\n      <div class="reply-history-time">\n        <span class="modify-time" title="{{date_tooltip regdate}}">{{date_summary regdate}}</span>{{#if is_modified}}<span> · {{m_reply_modified}}</span>{{/if}}\n      </div>\n      {{#each shared}}<span class="sns-shared-{{this}} text-indent sns-shared-icon" aria-label="{{this}}">{{this}}</span>{{/each}}\n    </div>\n  </div>\n  <div class="reply-bottom">\n    {{#if quotation_seq}}\n    <div class="quotation">\n      <div class="quotation-wrapper">\n        <div class="quotation-title">\n          <span class="icon"></span>\n        </div>\n        <div class="writer quotation-account">\n          <ul class="writer-account">\n            <li class="writer-type"><span class="text-indent bg-{{setJournalAccounts quotation.member_domain}}"> {{m_reply_primary}} </span></li>\n            <li class="writer-name"><a href="{{quotation.member_url}}" title="{{m_user_page}}" target="_blank"><span class="writer-name-text">{{quotation.name}}</span><span class="text-indent icon-outlink">{{m_open_setting}}</span></a></li>\n          </ul>\n        </div>\n        <div class="quotation-content">...{{{quotation_content}}}...</div>\n      </div>\n    </div>\n    {{/if}}\n    <div class="reply-content-wrapper">\n      {{#if sticker.sticker_id}}\n      <div class="reply-sticker">\n        <img src="{{sticker.sticker_icon}}" alt="{{sticker.sticker_description}}" class="attach-sticker"/>\n      </div>\n      {{/if}}\n      <div class="reply-content">\n        {{#isBlind police good bad}}\n        {{#isOwner member_group_seq}}\n        <p>{{breaklines (emoji (linkify (toHtml content)))}}</p>\n        {{else}}\n        <span>{{m_blind}}</span>\n        <span class="text-indent icon-blind"> {{m_blind_police}} </span>\n        <p class="hide">{{breaklines (emoji (linkify (toHtml content)))}} </p>\n        {{/isOwner}}\n        {{else}}\n        <p>{{breaklines (emoji (linkify (toHtml content)))}} </p>\n        {{/isBlind}}\n      </div>\n      <div class="reply-addition-wrapper {{images.klass}}">\n        {{#each images.list}}\n        {{#if ../images.klass}}\n        <button class="attach-multi-btn">\n          <span class="reply-image-viewer attached-image text-indent" data-src="{{this}}" style="background: url(\'{{this}}\') no-repeat 50% 50%; background-size: 450px;">{{../m_attach_image}}</span>\n          <span class="reply-image-viewer-btn text-indent">{{../m_zoom_in_image}}</span>\n        </button>\n        {{else}}\n        <button class="attach-image-btn">\n          <img class="attached-image" data-src={{this}} src={{this}} alt={{../m_attach_image}} />\n          <span class="reply-image-viewer text-indent"> {{../m_zoom_in_image}} </span>\n        </button>\n        {{/if}}\n        {{/each}}\n        {{#if link}}<div class="link-wrapper" data-uri="{{link}}" data-loaded="false"></div>{{/if}}\n        {{#if video}}<div class="third-party-wrapper" data-loaded="false" data-type="video" data-id={{video.id}} data-uri={{video.link}}></div>{{/if}}\n      </div>\n      <div class="reply-btn-group">\n        <div class="left">\n          <a href="{{setProtocol site}}#highlight-comment={{reply_seq}}" title="{{setProtocol site}}" target="_blank">\n            <button type="button" class="reply-comment-btn"><span>{{m_comment_outlink}}</span></button>\n          </a>\n        </div>\n        <div class="center">\n          <button type="button" class="share-sns-btn"><span class="text-indent">{{m_shared}}</span></button>\n        </div>\n        <div class="right">\n          <button type="button" class="comment-good {{is_active reply_seq 201}}"><span class="text-indent">{{m_good}}</span><span class="good-count">{{good}}</span></button>\n          <button type="button" class="comment-bad {{is_active reply_seq 202}}"><span class="text-indent">{{m_bad}}</span><span class="bad-count">{{bad}}</span></button>\n        </div>\n      </div>\n    </div>\n    <div class="modify-wrapper"></div>\n    <div class="comment-wrapper hide"></div>\n    <div class="child-reply child-icon">\n      {{{twitter}}}\n    </div>\n  </div>\n</div>',reply_top:'<div class="writer" data-own="{{is_owner member_group_seq}}" data-seq="{{member_group_seq}}"><ul class="writer-account"><li class="writer-img"><img src="{{member_icon}}" alt="{{m_profile_img}}" onerror="Livere.imgError.call(this)"/></li><li class="writer-type"><span class="text-indent bg-{{setJournalAccounts member_domain}}">{{m_reply_primary}} </span></li><li class="writer-name"><span class="writer-name-text">{{name}}</span></li><li class="reply-option"><div class="reply-option-btn"><button type="button" class="content-toggle-btn content-close-btn text-indent"><span>{{m_reply_close}}</span></button><button type="button" class="reply-menu-btn"><span class="text-indent">{{m_reply_layer_open}}</span></button></div></li></ul></div><div class="reply-history" data-modified="{{is_modified}}"><div class="reply-history-time"><span class="modify-time" title="{{date_tooltip regdate}}">{{date_summary regdate}}</span>{{#if is_modified}} · {{m_reply_modified}}{{/if}} </div></div>',more_btn:'<div class="more-wrapper"><button type="button" class="more-btn list-more-btn" {{#if offset}}data-offset={{offset}}{{/if}}><span>{{m_sidebar_more}}</span></button></div>',reduce_btn:'<div class="list-reduce-wrapper"><div class="reduce-gradation"></div><div class="list-reduce"><button type="button"> <span>{{m_content_more}}</span><span class="text-indent list-reduce-icon">{{m_content_more}}</span></button></div></div>',video:'<iframe class="lv_player {{klass}}" type="text/html" src="{{link}}?controls=2&portrait=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen/>',unblock_user:{wrapper:'<ul class="list-block" data-seq="{{t_member_group_seq}}" data-type="{{message_type}}"> <li class="block-middle"> </li> <li class="confirm-bottom"> <button type="button" class="confirm-btn block-yes-btn"> <span>{{m_unblock}}</span> </li> </ul>',block_cancel:'<span class="block-middle-title">{{#if member_name}}<span class="font-dark-gray">{{member_name}} </span> {{m_block_history}}{{/if}}</span> <ul class="block-cancel" data-seq="{{t_member_group_seq}}"> <li class="block-middle-reason"> <span class="font-dark-gray">[{{m_block_reason}}]</span> <span class="">{{getBlockMessage t_member_group_seq false}}</span> </li> <li> <span class="font-dark-gray">{{m_block_unblock_confirm}}</span> </li> </ul>',block_confirm:'<span class="block-middle-message">{{m_block_unblock_confirm}}</span>'},emoji:'<span class="emoji {{name}}"></span>'},common:{notify:{alert:'<div class="alert-wrapper fixed"><button class="alert-btn" data-type="alert">{{message}}</button></div>',error:'<div class="alert-wrapper fixed"><button class="alert-btn error-btn" data-type="alert">{{message}}</button></div>',primary:'<div class="alert-wrapper fixed"><button class="alert-btn" data-type="alert">{{korean member_domain}} {{message}}</button></div>'},write_form:{c_wrapper:'<div class="login"></div><div class="comment-wf"></div><div class="child-sns-list"></div>',m_wrapper:'<div class="modify-wf"></div>',quotation:'<div class="quotation-wrapper"><div class="quotation-title"> {{m_write_quotation}} <span class="icon"></span><button class="close"><span class="text-indent">{{m_close}}</span></button></div><div class="writer quotation-account"><ul class="writer-account"><li class="writer-type"><span class="{{member_domain}}"> {{m_reply_primary}} </span></li><li class="writer-name"><span class="writer-name-text">{{name}}</span><span class="text-indent icon-outlink">{{m_open_setting}}</span></li></ul></div><div class="quotation-content">...{{content}}...</div>',account:'<ul class="writer-account"><li class="writer-img"><button type="button" class="writer-img-btn"><img src="{{member_icon}}" alt="{{member_domain}} {{m_profile_img}}" onerror="Livere.imgError.call(this)"/></button></li><li class="writer-type"><button type="button" class="writer-type-btn"><span class="text-indent bg-{{setJournalAccounts member_domain}}"> {{m_representative_sns}} </span></button></li><li class="writer-name"><button type="button" class="writer-name-btn" data-target=""><span class="writer-name-text">{{member_name}}</span><span class="text-indent icon-gray-down">{{m_open_menu}}</span></button></li></ul>',wf_top:'<div class="wf-top {{#if sns}}outline-{{sns}}{{/if}}"><label for="comment-wf-content" class="text-indent">{{m_write_area}}</label><textarea id="comment-wf-content" title="{{m_write_area}}" aria-label="{{m_write_area}}" style="height:{{height}}px">{{content}}</textarea></div>',wf_bottom:'{{#is_login}}<div class="wf-bottom"><div class="wf-bottom-left">{{#if is_modify}}<div class="wf-guide">{{m_modify_guide}}</div>{{/if}}</div><div class="wf-bottom-right">{{#if is_comment}}<button class="share-btn" data-target="#layer-shared"><span class="share-count-wrapper"> {{m_shared_reply}} <span class="share-count">{{share_count}}</span><span class="text-indent icon-gray-down">{{m_set_shared_sns}}</span></span></button>{{/if}}{{#if is_modify}}<button type="button" class="comment-cancel-btn"><span>{{m_cancel}}</span></button>{{/if}}<button type="button" class="wf-write-btn"><span>{{#if is_comment}}{{m_write}}{{/if}}{{#if is_modify}}{{m_modify}}{{/if}}</span></button></div></div>{{/is_login}}',login:'<span class="sns-login-title">{{#if company}}<strong class="quotation-login-title-company">{{company}}</strong>,{{/if}} SNS 계정으로 글쓰기 </span><ul class="sns-login-list">{{#each linkage_accs}}<li><button type="button" class="sns-login-{{this}}"><span class="text-indent bg-{{setJournalAccounts this}}-medium">{{korean this}} {{../m_login}}</span></button></li>{{/each}}</ul>'}},sidebar:{wrapper:'<div class="sidebar-top {{#if isOwner}}sidebar-owner{{/if}} {{#is_mobile}}fixed{{/is_mobile}}"></div><div class="sidebar-middle" {{#is_mobile}}style="margin-top:{{setMiddleMargin}}"{{/is_mobile}}></div><div class="sidebar-bottom"></div>',top:'\n{{#is_mobile}}\n{{else}}\n<ul class="sidebar-title-wrapper">\n  <li class="sidebar-title">\n    <div class="sidebar-account bg-{{setJournalAccounts member_domain}}-primary">\n      <span>{{m_primary}}</span>\n      <span class="sidebar-name">{{member_name}}</span>\n      {{#if modifyProfile}}\n      <label for="sidebar-modify-name"></label>\n      <input id="sidebar-modify-name" value="{{member_name}}">\n      <span class="text-indent icon-modify">{{m_modify_nickname}}</span>\n      {{/if}}\n    </div>\n  </li>\n  <li class="sidebar-profile">\n    {{#if modifyProfile}}\n    <form action="https://was.livere.me/v1/image/upload/" class="lv-profile-upload-from" method="post" enctype="multipart/form-data">\n      <div class="lv-profile-upload">\n        <img src="{{member_icon}}" onerror="Livere.imgError.call(this)"/>\n        <span class="camera_icon">camera icon</span>\n        <label for="lv-profile-upload">{{m_attach}}</label>\n        <input id="lv-profile-upload" type="file" name="lv_file"/>\n      </div>\n    </form>\n    {{else}}\n    <img src={{member_icon}} alt="{{korean member_domain}} {{m_profile_img}}" onerror="Livere.imgError.call(this)"/>\n    {{/if}}\n  </li>\n  {{#ifCompare member_domain "==" "livere"}}\n  {{#if isOwner}}\n  <li class="sidebar-modify-btn-group">\n    <div>\n      <button type="button" class="sidebar-modify-btn">\n        <span class="font-dark-gray">{{m_modify_profile}}</span>\n      </button>\n      {{#if modifyProfile}}\n      <button type="button" class="sidebar-modify-save">\n        <span class="font-dark-gray">{{m_save}}</span>\n      </button>\n      <button type="button" class="sidebar-modify-cancel" data-type="cancel">\n        <span class="font-dark-gray">{{m_cancel}}</span>\n      </button>\n      {{/if}}\n    </div>\n  </li>\n  {{/if}}\n  {{/ifCompare}}\n  <li class="sidebar-sns">\n    <ul>\n    {{#each accounts}}\n      {{#containSNS member_domain}}\n      <li class="bg-{{setJournalAccounts member_domain}}-micro"></li>\n      {{/containSNS}}\n    {{/each}}\n    </ul>\n  </li>\n  <li class="sidebar-info">\n    <div class="left">\n      <span>{{m_write_count}}</span>\n      <span class="count sidebar-reply-count">{{writeCount}}</span>\n    </div>\n    <div class="right">\n      <span>{{m_sns_count}}</span>\n      <span class="count sidebar-sns-count">{{snsCount}}</span>\n    </div>\n  </li>\n</ul>\n{{/is_mobile}}\n<div class="sidebar-mini-title-wrapper{{#is_mobile}}{{else}} hide{{/is_mobile}}">\n  <div class="sidebar-mini-profile">\n    <img src="{{member_icon}}" onerror="Livere.imgError.call(this)">\n  </div>\n  <div class="sidebar-mini-account">\n    <span class="sidebar-mini-name bg-{{setJournalAccounts member_domain}}">{{member_name}}</span>\n    <div class="sidebar-mini-count">\n      <span class="count">{{writeCount}}</span>\n      <span class="count-text">{{m_write_reply_count}}</span>\n    </div>\n  </div>\n</div>\n<div class="sidebar-menu">\n  <ul class="sidebar-tabs">\n    <li>\n      <button type="button" class="sidebar-myreply-current-livere-btn" data-value="replies">{{{m_myreply_comments}}}</button>\n    </li>\n    <li>\n      <button type="button" class="sidebar-myreply-btn" data-value="repliesAll">{{{m_myreply_comments_all}}}</button>\n    </li>\n  </ul>\n  {{#if isOwner}}\n  <ul class="sidebar-own-tabs">\n    <li>\n      <button type="button" class="sidebar-notification-btn" data-value="notification">\n        <span>{{m_noti_tab}}</span>\n      </button>\n    </li>\n    <li>\n      <button type="button" class="sidebar-setting-btn" data-value="setting">\n        <span>{{m_setting_tab}}</span>\n      </button>\n    </li>\n  </ul>\n  {{/if}}\n</div>\n        ',middle:'<div class="sidebar-content"><div id="sidebar-reply-list"></div><div id="sidebar-notification-list"></div><div id="sidebar-setting-wrapper"></div></div>',bottom:'<div class="sidebar-notice"><a href="https://livere.com/notice" title="{{m_move_notice}}" aria-label="{{m_move_notice}}" target="_blank"> {{m_livere_notice}} </a></div><div class="home"><a href="http://www.livere.com" title={{m_livere_home}} - {{m_window_open}} aria-label={{m_livere_home}} - {{m_window_open}} target="_blank"> Powered by <strong class="home-live">Live</strong><strong class="home-re">Re</strong></a></div>',notSupport:'<div class="sidebar-not-support">{{{m_not_support_notification}}}</div>',
notification:'{{#each rows}}<div class="notification-wrapper {{#if isView}}{{else}} notification-wrapper-new{{/if}}" data-nid="{{id}}"><ul><li class="notification-title"> <span class="font-dark-gray">{{title}}</span></li><li class="notification-writer-img"> <img src="{{memberIcon}}" alt="{{../m_profile_img}}" onerror="Livere.imgError.call(this)"/> </li> <li class="notification-writer-type"> <span class="text-indent bg-{{setJournalAccounts memberDomain}}-micro"> {{../m_primary}} </span> </li> <li class="notification-content"><span class="font-dark-gray">{{memberName}}</span><span>{{#ifCompare party ">" 1}}{{../m_dear_many}} {{party}}{{../m_few_people}}{{else}}{{../m_dear}}{{/ifCompare}} </span><span class="font-dark-gray">{{#if isComment}}{{../m_comment}}</span>{{../m_to_reply}}{{else}}{{../m_p_comment}}</span>{{../m_to_good}}{{/if}}</span> <div class="notification-reply-wrapper"> <span class="notification-{{#if isComment}}reply{{else}}good{{/if}}-icon text-indent"></span> <span class="font-dark-gray">{{toText content}}</span> </div> <div class="notification-history"> <span class="notification-time">{{date_summary regdate}}</span> </div></li> </ul></div>{{/each}}',notification_more_btn:'<div class="more-wrapper"><button type="button" class="more-btn notification-more-btn" {{#if offset}}data-offset={{offset}}{{/if}}><span>{{m_sidebar_more}}</span></button></div>',setting:'<dl class="sidebar-setting"><dt class="sidebar-setting-title"> {{m_account_setting}} </dt> {{#each accounts}} <dd><button type="button" class="sidebar-setting-account" data-seq={{member_seq}} data-domain={{member_domain}}><span class="sidebar-setting-img"><img src={{member_icon}} alt="{{korean member_domain}} {{m_profile_img}}" onerror="Livere.imgError.call(this)"></span><span class="sidebar-setting-type text-indent bg-{{setJournalAccounts member_domain}}{{#is_primary member_seq}}-primary{{/is_primary}}"> {{../m_selected_sns}} </span><span class="sidebar-setting-name">{{member_name}}{{getMediaName member_domain}}</span><span class="text-indent icon-down">{{../m_open_menu}}</span></button>{{#isLivereAccount member_domain}}<button class="password-reset-btn" style="top:14px;right:93px;position:absolute;border-radius:5px; border-bottom-left-radius:0px;background-color:#f6f6f6;"><img src="https://cdn-city.livere.com/images/mysecret-off.png" style="width:17px;padding:5px;"></button><button class="icon-member-leave"> <span class="text-indent">{{../m_member_leave}}</span></button><div class="member-password-layer member-leave-layer hide"><button type="button" class="member-leave-btn"><span>{{../m_member_password_reset}}</span></button> <span class="member-leave-tail text-indent">{{../m_member_password_reset}}</span> </div><div class="member-leave-layer member-leave hide"><button type="button" class="member-leave-btn"><span>{{../m_member_leave}}</span></button> <span class="member-leave-tail text-indent">{{../m_member_leave}}</span> </div>{{/isLivereAccount}}<ul class="sidebar-setting-content"></ul></dd> {{/each}} </dl><div class="sidebar-login">{{#if notLoggedInList}}<span class="login-tip-title"> {{m_login_tip_title}} </span><br/><ul class="sidebar-login-list"> {{#each notLoggedInList}} <li><button type="button" class="sns-login-{{this}}" data-name={{this}}><span class="text-indent bg-{{this}}-medium">{{korean this}} {{m_login}}</span></button></li> {{/each}} </ul>{{/if}}<ul class="login-tip-list"><li>- {{m_login_tip_list_1}}</li><li>- {{m_login_tip_list_2}}</li><li>- {{{m_login_tip_list_3}}}</li></ul></div><div class="sidebar-push"><div>{{m_myreply_setting}}</div> <ul><li><span>{{m_myreply_make_public}}</span><button type="button" class="setting-radio-btn {{#if notify_bookmark}}btn-on{{else}}btn-off{{/if}}" data-value="notify_bookmark"><span class="text-indent">{{m_myreply_make_public}} {{m_on_or_off}}</span></button></li></ul></div><div class="sidebar-push"><div>{{m_notification_setting}}</div><ul><li><span>{{m_comment_noti}}</span><button type="button" class="setting-radio-btn {{#if notify_comment}}btn-on{{else}}btn-off{{/if}}" data-value="notify_comment"><span class="text-indent">{{m_comment}} {{m_notification}} {{m_on_or_off}}</span></button></li><li><span>{{m_good_noti}}</span><button type="button" class="setting-radio-btn {{#if notify_good}}btn-on{{else}}btn-off{{/if}}" data-value="notify_good"><span class="text-indent">{{m_good}} {{m_notification}} {{m_on_or_off}}</span></button></li></ul></div>',setting_content:'<li {{#is_primary member_seq}}class="hide"{{/is_primary}}><button class="setting-primary-btn"><span>{{m_set_primary}}</span></button></li><li><span>{{m_auto_shared}}</span> <button class="{{#hasPublish member_domain}}setting-radio-btn {{#is_posting member_seq}}btn-on{{else}}btn-off{{/is_posting}} {{else}}setting-disable-btn{{/hasPublish}}"><span class="text-indent">{{m_auto_shared_tooltip}}</span></button></li><li><button class="setting-logout-btn"><span>{{m_remove_account}}</span></button></li>'},cardPopup:{wrapper:'\n<div class="card-popup-wrapper">\n  <div class="card-popup{{#unless reply.image }} without-image{{/unless}}">\n    <div class="card-popup-top">\n      <div class="reply-information">\n        <img class="writer-profile" src="{{ reply.memberIcon }}"/>\n        <i class="writer-sns i-p-{{reply.memberDomain}}"></i>\n        <span class="writer-name">{{ reply.writerName }}</span><br>\n        <time class="writer-time">{{ reply.regdate }}</time>\n      </div>\n      <button class="card-popup-close-button">\n        <i class="i-close-b"></i>\n        {{! TODO type 변경 }}\n      </button>\n    </div>\n    <div class="card-popup-middle">\n      <div class="card-popup-image-wrapper">\n        <img class="card-popup-image" src="{{ reply.image }}">\n        <div class="card-popup-cover"></div>\n        <span class="card-popup-image-message">{{ m_card_popup_original_photo_message }}</span>\n      </div>\n      <div class="card-popup-content-wrapper">\n        <div class="card-popup-content">\n          {{ reply.content }}\n        </div>\n      </div>\n    </div>\n    <div class="card-popup-more-button">{{ m_card_popup_expand }}</div>\n    <div class="card-popup-bottom">\n      <div class="reply-option">\n        <button class="button-like">\n          {{! TODO type 변경 }}\n          <i class="i-like-b"></i>\n          <span class="like-count">{{ reply.good }}</span>\n        </button>\n        {{#ifCompare reply.targetMemberGroupSeq "==" memberGroupSeq}}\n        <button class="button-delete">\n          <i class="i-delete-b"></i>\n          {{! TODO type 변경 }}\n        </button>\n        {{/ifCompare}}\n      </div>\n    </div>\n  </div>\n</div>\n        '},external_style:'{{#if this}}<style type="text/css">\n      #container #sidebar .sidebar-wrapper .bg-{{this}}-primary, #container .bg-{{this}}-medium,\n      #container .bg-{{this}}-medium:hover,\n      #container .bg-{{this}},\n      #container #sidebar .sidebar-wrapper .bg-{{this}}-micro {\n        background: url(https://cdn-city.livere.com/external/{{this}}/icon_sprite.png) no-repeat 0px 0px;\n      }\n      @media only screen and (min-device-pixel-ratio: 1.5),\n          only screen and (-webkit-min-device-pixel-ratio: 1.5),\n          only screen and (min--moz-device-pixel-ratio: 1.5),\n          only screen and (-o-min-device-pixel-ratio: 1.5) {\n        #container #sidebar .sidebar-wrapper .bg-{{this}}-primary,\n        #container .bg-{{this}}-medium,\n        #container .bg-{{this}}-medium:hover,\n        #container .bg-{{this}},\n        #container #sidebar .sidebar-wrapper .bg-{{this}}-micro {\n          background: url(https://cdn-city.livere.com/external/{{this}}/icon_sprite@3x.png) no-repeat 0px 0px; background-size: 106px;\n        }\n      }\n      #container #sidebar .sidebar-wrapper .bg-{{this}}-primary {\n        background-position: -86px 0px; margin-top: 2px !important; padding-top: 15px; height: 25px;\n      }\n      #container .bg-{{this}}-medium {\n        background-position: 0px 0px;\n      }\n      #container .bg-{{this}}-medium:hover {\n        background-position: 0px -34px;\n      }\n      #container .bg-{{this}} {\n        background-position: -86px -54px;\n      }\n      #container #sidebar .sidebar-wrapper .bg-{{this}}-micro {\n        background-position: -50px 0px;\n      }\n      button.sns-login-{{this}} .sns-icon {\n        background: url(https://101.livere.co.kr/consumers/{{this}}/zero/i-c-{{this}}-l.png); background-size: 100%;\n      }\n    </style>{{/if}}'},livere.set=function(a,b){if(!_.isObject(a)||b)return variables[a]=b,livere.get(a);for(var c in a)set(c,a[c])},livere.get=function(a){var b=variables[a],a=a.split(".");return _.isArray(a)&&a.length>1&&(b=search(a.length,a,variables)),b},livere.getAll=function(){return variables},livere.imgError=function(){var a="https://cdn-city.livere.com/images/user_profile_";return a+=Math.ceil(5*Math.random()),$(this).addClass("error-img"),$(this).attr("src",a)};var Waterfall=function(){};Waterfall.prototype.init=function(){if(isMobile()&&location.search.indexOf("redirectOrigin")>-1)return waterfall.oauth.call(this);dom.remove("#container div"),config.init().then(session.init).then(dom.init).then(control.init).fail(waterfall.fail).done(waterfall.done)},Waterfall.prototype.oauth=function(){!function(a,b){var c,d=a.getElementsByTagName(b)[0];c=a.createElement(b),c.src="https://api-city.livere.com/smartlogin",c.async=!0,d.parentNode.insertBefore(c,d)}(document,"script")},Waterfall.prototype.done=function(){return waterfall.event.init.call(this),window.parent!==window||sidebar.open.call(this,{isTab:!0})},Waterfall.prototype.fail=function(a){switch(log(a),dom.remove("#container div",!1),a){case"construction":dom.build("construction");break;default:waterfall.event.fail.call(this,sidebar.close)}},Waterfall.prototype.error=function(){dom.build("error"),control.bind("refresh")},Waterfall.prototype.notify=function(){var a={};return a.position=function(a){return $(".alert-wrapper").css("top",a.top)},a.alert=function(){return dom.remove($(this).parent())},a}(),Waterfall.prototype.event=function(){var a={};return a.init=function(){return control.bind("message"),postMessage({e:"inited",caller:"sidebar",params:{type:"inited",data:{}}})},a.fail=function(a){return postMessage({e:"fail",caller:"sidebar"}),!a||a.call(this)},a.state=function(){return postMessage({e:"state",caller:"sidebar"})},a.close=function(){return set("loaded",!1),postMessage({e:"close",caller:"sidebar"})},a.loaded=function(){setTimeout(function(){postMessage({e:"loaded",caller:"sidebar",height:$("#container").height()})},10)},a.updateBlock=function(a){return postMessage({e:"updateBlock",caller:"sidebar",params:a})},a.loginData=function(a){return postMessage({e:"hooker",caller:"utils",params:{type:"loginData",data:a}})},a.sessionData=function(a){return postMessage({e:"hooker",caller:"utils",params:{type:"sessionData",data:a}})},a}(),Waterfall.prototype.popup=function(){var a={};return a.report=function(a){var b=$(a.currentTarget).parents(".reply-wrapper").eq(0);return isLogin()?(dom.build("popupHandler",{target:"report"}),control.bind("popup.report",b),this):waterfall.popup.login()},a.cancelAttach=function(a){var b=$(this),c=b.siblings(),d=get("images"),e=c.attr("src");d&&e&&(set("images",null),dom.remove(".attach-image-wrapper",!0).build("images",_.filter(d,function(a){return a.image!==e})))},a.logout=function(a){return dom.build("popupHandler",{target:"logout"}),control.bind("popup.logout",a),this},a.remove=function(a){var b=$(a.currentTarget),c=b.parents(".reply-wrapper").eq(0);return dom.build("popupHandler",{target:"remove"}),control.bind("popup.remove",c),this},a.modify=function(a){return dom.build("modify",a),this},a.cancel_quotation=function(){return dom.build("popupHandler",{target:"quotation"}),control.bind("popup.quotation"),this},a.unblock=function(){return isLogin()?(dom.build("popupHandler",{target:"unblock"}),control.bind("block.unblock"),this):waterfall.popup.login()},a.block=function(a){return isLogin()?(dom.build("popupHandler",{event:a,target:"block"}),control.bind("block.block"),this):waterfall.popup.login()},a.login=function(){var a=get("smartlogin.linkage_accs"),b=(a.length,a.slice(0,6));return _(6-b.length).times(function(a){return b.push("")}),dom.build("popupHandler",{target:"login",linkageAccs:b}),this},a}(),Waterfall.prototype.modifyProfile=function(){var a={};return a.modifyDraw=function(){set("modifyProfile",!0),dom.refresh.sidebar.top()},a}(),Waterfall.prototype.layer=function(){var a={};return a.quotation=function(){var a=window.getSelection;if(a&&a().toString().length>2){var b=a().getRangeAt(0),c=b.getBoundingClientRect();if(b.endOffset<1)return;dom.build("layerHandler",{self:c,target:"quotation"})}},a.share=function(){dom.build("layerHandler",{self:$(this),target:"share"})},a.login=function(){dom.build("layerHandler",{self:$(this),target:"login"})},a.shared=function(){dom.build("layerHandler",{self:$(this),target:"shared"})},a.sort=function(){var a=$(this).attr("data-target");dom.clearLayers("#wrapper",a),toggle(a)},a.account=function(){var a=$(this).attr("data-target");dom.clearLayers("#wrapper",a),toggle(a)},a.reply=function(){return dom.build("layerHandler",{self:$(this),target:"reply"}),this},a}(),Waterfall.prototype.quotation=function(){function a(){return dom.remove("#wrapper > .quotation-wrapper",!1)}var b={};return b.init=function(){var a=window.getSelection(),b=a.toString();if(b){var c=$(a.anchorNode.parentNode),d=c.parents(".reply-wrapper").eq(0);set("quotation",{reply_seq:d.attr("data-seq"),member_group_seq:d.find(".writer").attr("data-seq"),member_domain:d.find(".writer-type span").attr("class"),name:d.find(".writer-name a").attr("title"),content:b,offset:d.position().top}),dom.clearLayers().build("quotation"),$("html, body").animate({scrollTop:$("#wrapper").position().top-30},400)}},b.done=function(){return a(),set("quotation",null)},b.cancel=function(){var a=$("#wf-content").val(),c=get("quotation.offset");return b.done(),!(a.length<1)||$("html, body").animate({scrollTop:c},400)},b}();var waterfall=new Waterfall;return moment.locale("zh-cn"),dom.message={few_seconds:"刚才",m_setting_account:"设置账号",m_profile_img:"头像",m_representative_sns:"代表帐号",m_open_menu:"打开设置",m_user_page:"移动到我的页面",m_change_account:"修改账号",m_logout:"注销",m_primary:"代表帐号",m_more_login:"追加账号",m_write_sns_acc:"第三方账号登录",m_write_area:"评论输入领域",m_write_placeholder:"请您输入评论的内容",m_shared_reply:"分享评论",m_set_shared_sns:"设置SNS分享与否",m_write:"写评论",m_more_write:"回复",m_livere_home:"来必力主页",m_window_open:"现在打开新页面",m_is_livere:"来必力是？",m_install_livere:"安装",m_contact_mail:"询问",m_load_image:"正在载入图片",m_load_video:"正在载入视频",m_preview:"预览",m_original:"看原件",m_youtube_or_vimeo:"输入youtube/vimeo链接",m_attach:"添加照片",m_cancel_attach:"取消",m_attach_image:"曾添加的照片",m_video:"添加视频",m_zoom_in_image:"扩大照片",m_max_images:"图片能添加到3张",m_login:"登录",m_play:"播放",m_open_setting:"打开设置",m_insert_here:"把照片拖拽到这里",m_reply:"总评论数",m_reply_primary:"有关评论的代表账号",m_reply_close:"关闭",m_reply_layer_open:"打开目录",m_reply_modified:"修改完成",m_reply_be_modified:"修改前的评论",m_reply_modify:"修改",m_modified_list:"修改内容",m_modify:"修改",m_modify_list:"查看修改内容",m_dear:"",m_dear_many:"外",m_few_people:"",m_to_reply:"发表了评论",m_to_good:"发表了感想",m_reply_report:"举报",m_reply_report_title:"举报评论",m_spam:"垃圾评论",m_plaster:"水贴",m_slander:"侵犯个人信息/损害名誉",m_etc:"其它",m_reply_delete:"删除评论",m_reply_deleted:"已删除的评论",m_reply_quotation:"引用的评论",m_write_quotation:"你要引用的评论",m_cancel_quotation:"你确定取消写评论吗?",m_reply_shared_sns:"已分享的SNS",m_input_area:"输入评论领域",m_modify_guide:"每个评论只能修改一次.",m_is_delete:"您确定删除这评论吗?",m_cancel:"取消",m_yes:"确定",m_no:"不要",m_close:"关闭",m_prev:"上一步",m_next:"下一步",m_comment:"回复",m_quotation:"引用",m_shared:"分享",m_share:"分享",m_good:"同感",m_bad:"反对",m_more:"查看更多",m_sidebar_more:"查看更多",m_highlight_more:"个评论全体查看",m_content_more:"翻看评论",m_twitter:"twitter ",m_facebook:"facebook",m_kakao:"Kakao",m_tistory:"Tistory",m_instagram:"Instagram",m_kakao_story:"Kakao story",m_github:"Github",m_linkedIn:"Linked in",m_google_plus:"Google+",m_naver:"Naver",m_cyworld:"Cyworld",m_through_facebook:"通过 Facebook",m_through:"通过",m_sort_recent:"最早评论",m_sort_oldest:"最旧评论",m_sort_good:"按同感数排序",m_best_reply:"热门评论",m_another_accounts_p:"查看 ",m_another_accounts_s:"个别的账号",m_sns_login:"追加SNS账号",m_write_count:"总评论数",m_sns_count:"绑定的社交网站账号个数",m_reply_tab:"打开我的评论",m_bookmark_tab:"打开书签",m_noti_tab:"打开提示窗",m_setting_tab:"打开设置窗",m_livere_notice:"【来必力通知事项】",m_move_notice:"去来必力官网的公告事项",m_thumbnail:"缩略图",m_count:"个",m_account_setting:"设置绑定的社交网站账号",m_selected_sns:"SNS种类",m_set_primary:"设置为代表账号",m_auto_shared:"自动分享我的评论",m_auto_shared_tooltip:"开/关分享评论功能",m_account_logout:"解除绑定",m_login_tip:"如果你提前登录多样的第三方账号，所有的账号能够写评论与分享。点击一下下面的SNS按钮，登录吧。",m_notification_setting:"设置来必力提示",m_sns_login_s:"追加SNS账号",m_on_or_off:"开或关",m_notification:"提示",m_reply_history:"我留过评论的网页",m_bookmark_page:"书签的网页",m_comment_noti:"收到回复的时候",m_comment_outlink:"回复",m_good_noti:"收到同感的时候",m_bad_noti:"收到反对的时候",m_remove_account:"解除绑定",m_is_remove_account:"你要把帐号解除绑定吗?",m_load_replies:"正在载入来必力",m_discovery_world:"发现没有评论的新大陆！",m_hooray:"耶！",m_write_first_reply:"您就能获取沙发！",m_construction:"正在来必力维修中",m_construction_date:"维修时间",m_construction_desc_f:"为了更好的通讯服务.",m_construction_desc_s:"正在维修中",m_construction_desc_t:"请稍等一下",m_error_msg:"肯定发生什么问题..",m_error_refresh:"请刷新后重试",m_refresh:"刷新",m_new_reply_f:"新写的评论有",m_new_reply_s:"个",m_success_login:"登录成功",m_success_logout:"注销完成",m_success_deconnect:"账号绑定解除",m_success_primary:"代表账号设置完成",m_success_delete:"评论删除完成",m_success_report:"你举报的内容传到来必力.谢谢.",m_error:"不能载入来必力",m_reload:"《重新载入》",m_success_action_f:"在评论",m_success_action:"完成",m_success_write:"评论在来必力登记完成",m_success_modify:"评论修改完成",m_remove_account_last_f:"这是与来必力绑定的最后一个账号",m_remove_account_last_s:"解除绑定时,你再也不能删除/修改评论",m_notify_write:"评论在来必力登记完成",m_notify_modify:"评论修改完成",m_notify_remove:"评论删除完成",m_notify_report:"你举报的内容传到来必力.谢谢.",m_notify_logout:"注销完成",m_notify_login:"在来必力登录成功",m_notify_primary:"账号设置于代表账号。",m_notify_attach:"新帐号绑定成功!",m_notify_detach:"账号绑定解除了",m_notify_needLogin:"需要登录",m_notify_contentLength:"请输入评论的内容",m_notify_error:"发生错误，请稍等重试",m_notify_imageLimit:"照片能添加到3张",m_notify_imageType:"只能上传照片",m_block:"黑名单",m_block_reply:"黑名单写的评论",m_block_prefix:"列入黑名单的原因",m_block_suffix:"]",m_block_1:"因为过头说脏话我感到反感",m_block_2:"因为我来判断这账号写垃圾评论",m_block_3:"因为他拥有跟我不同的倾向/价值观",m_show_reply:"查看评论",m_block_title:"黑名单",m_block_confirm_p:"你不想看 ",m_block_confirm_s:"的评论吗？",m_block_confirm:"",m_block_history:"是因下列的原因，列入黑名单",m_block_custom:"亲自输入",m_block_placeholder:"其它(例:他只说怪话..)",m_block_reason:"列入黑名单的原因",m_block_show_confirm:"评论会含您不想看的内容，确定你要打开吗？",m_block_unblock_confirm:"您确定解除黑名单吗?",m_block_show_yes:"我要看",m_block_show_no:"我不要看",m_block_no:"取消",m_block_user:"黑名单",m_unblock:"解除",m_unblock_user:"黑名单状态解除",m_block_guide:"输入其它的原因",m_blind:"因为用户们的举报，而这评论是被屏蔽的",m_blind_police:"举报的评论",m_load_link:"正在载入链接",m_livere_join:"绑定来必力账号",m_livere_join_email:"如你绑定来必力账号，你可以收到评论提示。",m_member_leave:"注销来必力账号",m_modify_nickname:"修改绰号",m_modify_profile:"修改我的信息",m_login_tip_title:"添加社交网络账号",m_login_tip_list_1:"可以使用多个社交网络账号进行登录",m_login_tip_list_2:"根据需要选择不同的账号进行分享",m_login_tip_list_3:"安全保管绑定的后账号信息",m_save:"保存",m_read_all_comments:"你读完所有的评论",m_name:"姓名",m_email:"邮件",m_p_comment:"回复",m_password:"密码",m_guest_title:"或通过来必力简单写评论",m_guest_easy:"简单写评论是什么?",m_guest_tooltip:"<ul><li class='tooltip-title'>最安全的评论系统，来必力</li><li>来必力是在广为使用的社交评论的标准。第一次写评论就可以登记，从第二次评论需要一次的邮件验证。</li><li>邮件会用来必力ID, 对顾客提示评论的及时消息。这种信息不会用到别事情，保存安全。</li><li>我们不检查评论的内容，评论的现出标准个别网站决定。可广告性垃圾评论每天会自动屏蔽。</li></ul>",m_guest_input_name:"输入你的姓名",m_guest_input_email:"输入正确邮件形式",m_guest_input_password:"输入密码",m_guest_duplicate:"已经在来必力登录的邮件。通过这份邮箱登录一下",m_guest_login:"登录",m_guest_livere_login:"登录来必力",m_guest_need_login:"请登录或简单写评论",m_guest_empty_content:"请输入内容",m_guest_write_done:"评论登记成功！<br/>验证邮件发给你的邮件，确认一下",m_guest_email_length:"邮件能输入5～100个字。",m_guest_email_upto:"邮件能输入到100个字。",m_guest_input_nickname:"请输入绰号",m_guest_invalid_email:"现在不正确邮件形式",m_guest_invalid_password:"密码错误",m_guest_nickname_least:"绰号从两个字能开始输入",m_guest_nickname_length:"绰号能输入2～12个字",m_guest_nickname_upto:"绰号能输入到12个字",m_guest_not_logged_in:"请登录或简单写评论",m_guest_password_least:"密码从6个字能够输入",m_guest_password_length:"密码能输入6～20个字",m_guest_password_restrict:"密码要开始英语或数字，特殊文字只能用!@#$%&*_",m_guest_password_upto:"密码能输入到20个字",m_invalid_request:"不正常的要求",m_livere:"来必力",m_notification_empty:"没有提示",m_notify_nameLength:"绰号能输入2～30个字。",m_reply_empty:"没有评论",m_write_reply_count:"个评论",m_member_password_reset:"修改密码",m_myreply_setting:"我的评论记录设定",m_myreply_make_public:"我的评论记录公开",m_myreply_private_account:"此用户未公开评论记录",m_myreply_comments:"我在本站的评论",m_myreply_comments_all:"我的所有评论"},livere}(jQuery);Livere.init();